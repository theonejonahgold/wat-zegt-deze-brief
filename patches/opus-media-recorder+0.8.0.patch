diff --git a/node_modules/opus-media-recorder/.DS_Store b/node_modules/opus-media-recorder/.DS_Store
new file mode 100644
index 0000000..de8eecc
Binary files /dev/null and b/node_modules/opus-media-recorder/.DS_Store differ
diff --git a/node_modules/opus-media-recorder/OggOpusEncoder.js b/node_modules/opus-media-recorder/OggOpusEncoder.js
index b1459fd..119e445 100644
--- a/node_modules/opus-media-recorder/OggOpusEncoder.js
+++ b/node_modules/opus-media-recorder/OggOpusEncoder.js
@@ -6,7 +6,7 @@ var Module = (function() {
 function(Module) {
   Module = Module || {};
 
-var Module=typeof Module!=="undefined"?Module:{};const{EmscriptenMemoryAllocator:EmscriptenMemoryAllocator}=require("./commonFunctions.js");const OPUS_APPLICATION=2049;const OPUS_OUTPUT_SAMPLE_RATE=48e3;const OPUS_OUTPUT_MAX_LENGTH=4e3;const OPUS_FRAME_SIZE=20;const SPEEX_RESAMPLE_QUALITY=6;const BUFFER_LENGTH=4096;const OPUS_OK=0;const OPUS_SET_BITRATE_REQUEST=4002;const RESAMPLER_ERR_SUCCESS=0;class _OpusEncoder{constructor(inputSampleRate,channelCount,bitsPerSecond=undefined){this.config={inputSampleRate:inputSampleRate,channelCount:channelCount};this.memory=new EmscriptenMemoryAllocator(Module);this._opus_encoder_create=Module._opus_encoder_create;this._opus_encoder_ctl=Module._opus_encoder_ctl;this._opus_encode_float=Module._opus_encode_float;this._opus_encoder_destroy=Module._opus_encoder_destroy;this._speex_resampler_init=Module._speex_resampler_init;this._speex_resampler_process_interleaved_float=Module._speex_resampler_process_interleaved_float;this._speex_resampler_destroy=Module._speex_resampler_destroy;this._container=new Module.Container;this._container.init(OPUS_OUTPUT_SAMPLE_RATE,channelCount,Math.floor(Math.random()*4294967295));this.OpusInitCodec(OPUS_OUTPUT_SAMPLE_RATE,channelCount,bitsPerSecond);this.SpeexInitResampler(inputSampleRate,OPUS_OUTPUT_SAMPLE_RATE,channelCount);this.inputSamplesPerChannel=inputSampleRate*OPUS_FRAME_SIZE/1e3;this.outputSamplePerChannel=OPUS_OUTPUT_SAMPLE_RATE*OPUS_FRAME_SIZE/1e3;this.inputBufferIndex=0;this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*channelCount);this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*channelCount);this.mOutputBuffer=this.memory.mallocUint8Buffer(OPUS_OUTPUT_MAX_LENGTH);this.interleavedBuffers=channelCount!==1?new Float32Array(BUFFER_LENGTH*channelCount):undefined}encode(buffers){let samples=this.interleave(buffers);let sampleIndex=0;while(sampleIndex<samples.length){let lengthToCopy=Math.min(this.mInputBuffer.length-this.inputBufferIndex,samples.length-sampleIndex);this.mInputBuffer.set(samples.subarray(sampleIndex,sampleIndex+lengthToCopy),this.inputBufferIndex);this.inputBufferIndex+=lengthToCopy;if(this.inputBufferIndex>=this.mInputBuffer.length){let mInputLength=this.memory.mallocUint32(this.inputSamplesPerChannel);let mOutputLength=this.memory.mallocUint32(this.outputSamplePerChannel);let err=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,mInputLength.pointer,this.mResampledBuffer.pointer,mOutputLength.pointer);mInputLength.free();mOutputLength.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Resampling error.")}let packetLength=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(packetLength<0){throw new Error("Opus encoding error.")}this._container.writeFrame(this.mOutputBuffer.pointer,packetLength,this.outputSamplePerChannel);this.inputBufferIndex=0}sampleIndex+=lengthToCopy}}close(){const{channelCount:channelCount}=this.config;let finalFrameBuffers=[];for(let i=0;i<channelCount;++i){finalFrameBuffers.push(new Float32Array(BUFFER_LENGTH-this.inputBufferIndex/channelCount))}this.encode(finalFrameBuffers);Module.destroy(this._container);this.mInputBuffer.free();this.mResampledBuffer.free();this.mOutputBuffer.free();this._opus_encoder_destroy(this.encoder);this._speex_resampler_destroy(this.resampler)}interleave(channelBuffers){const chCount=channelBuffers.length;if(chCount===1){return channelBuffers[0]}for(let ch=0;ch<chCount;ch++){let buffer=channelBuffers[ch];for(let i=0;i<buffer.length;i++){this.interleavedBuffers[i*chCount+ch]=buffer[i]}}return this.interleavedBuffers}OpusInitCodec(outRate,chCount,bitRate=undefined){let mErr=this.memory.mallocUint32(undefined);this.encoder=this._opus_encoder_create(outRate,chCount,OPUS_APPLICATION,mErr.pointer);let err=mErr.value;mErr.free();if(err!==OPUS_OK){throw new Error("Opus encodor initialization failed.")}if(bitRate){this.OpusSetOpusControl(OPUS_SET_BITRATE_REQUEST,bitRate)}}OpusSetOpusControl(request,vaArg){let value=this.memory.mallocInt32(vaArg);this._opus_encoder_ctl(this.encoder,request,value.pointer);value.free()}SpeexInitResampler(inputRate,outputRate,chCount){let mErr=this.memory.mallocUint32(undefined);this.resampler=this._speex_resampler_init(chCount,inputRate,outputRate,SPEEX_RESAMPLE_QUALITY,mErr.pointer);let err=mErr.value;mErr.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Initializing resampler failed.")}}}Module.init=function(inputSampleRate,channelCount,bitsPerSecond){Module.encodedBuffers=[];Module.encoder=new _OpusEncoder(inputSampleRate,channelCount,bitsPerSecond)};Module.encode=function(buffers){Module.encoder.encode(buffers)};Module.flush=function(){return Module.encodedBuffers.splice(0,Module.encodedBuffers.length)};Module.close=function(){Module.encoder.close()};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require("path").dirname(scriptDirectory)+"/"}else{scriptDirectory=__dirname+"/"}read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){return read(f)}}readBinary=function readBinary(f){var data;if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function shell_read(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime;if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];if(typeof WebAssembly!=="object"){err("no native wasm support detected")}var wasmMemory;var wasmTable=new WebAssembly.Table({"initial":36,"maximum":36+0,"element":"anyfunc"});var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;var WASM_PAGE_SIZE=65536;var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var DYNAMIC_BASE=5289728,DYNAMICTOP_PTR=46688;var INITIAL_INITIAL_MEMORY=Module["INITIAL_MEMORY"]||16777216;if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{wasmMemory=new WebAssembly.Memory({"initial":INITIAL_INITIAL_MEMORY/WASM_PAGE_SIZE,"maximum":INITIAL_INITIAL_MEMORY/WASM_PAGE_SIZE})}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_INITIAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";out(what);err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";throw new WebAssembly.RuntimeError(what)}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var wasmBinaryFile="OggOpusEncoder.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(){try{if(wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(wasmBinaryFile)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary()})}return new Promise(function(resolve,reject){resolve(getBinary())})}function createWasm(){var info={"a":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module["asm"]=exports;removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiatedSource(output){receiveInstance(output["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&typeof fetch==="function"){fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync();return{}}function emscriptenPushBuffer(buf,len){let array=new Uint8Array(Module.HEAPU8.buffer,buf,len);Module.encodedBuffers.push(new Uint8Array(array).buffer)}__ATINIT__.push({func:function(){___wasm_call_ctors()}});function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}function _abort(){abort()}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};var SYSCALLS={mappings:{},buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},get64:function(low,high){return low}};function _fd_close(fd){return 0}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){}function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(fd,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}var asmLibraryArg={"a":___assert_fail,"c":_abort,"d":emscriptenPushBuffer,"f":_emscripten_memcpy_big,"g":_emscripten_resize_heap,"h":_fd_close,"e":_fd_seek,"b":_fd_write,"memory":wasmMemory,"table":wasmTable};var asm=createWasm();Module["asm"]=asm;var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return(___wasm_call_ctors=Module["___wasm_call_ctors"]=Module["asm"]["i"]).apply(null,arguments)};var ___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=function(){return(___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=Module["asm"]["j"]).apply(null,arguments)};var _emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=function(){return(_emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=Module["asm"]["k"]).apply(null,arguments)};var _emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=function(){return(_emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=Module["asm"]["l"]).apply(null,arguments)};var _emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=function(){return(_emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=Module["asm"]["m"]).apply(null,arguments)};var _emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=function(){return(_emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=Module["asm"]["n"]).apply(null,arguments)};var _emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=function(){return(_emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=Module["asm"]["o"]).apply(null,arguments)};var _opus_encoder_create=Module["_opus_encoder_create"]=function(){return(_opus_encoder_create=Module["_opus_encoder_create"]=Module["asm"]["p"]).apply(null,arguments)};var _opus_encode_float=Module["_opus_encode_float"]=function(){return(_opus_encode_float=Module["_opus_encode_float"]=Module["asm"]["q"]).apply(null,arguments)};var _opus_encoder_ctl=Module["_opus_encoder_ctl"]=function(){return(_opus_encoder_ctl=Module["_opus_encoder_ctl"]=Module["asm"]["r"]).apply(null,arguments)};var _opus_encoder_destroy=Module["_opus_encoder_destroy"]=function(){return(_opus_encoder_destroy=Module["_opus_encoder_destroy"]=Module["asm"]["s"]).apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return(_malloc=Module["_malloc"]=Module["asm"]["t"]).apply(null,arguments)};var _free=Module["_free"]=function(){return(_free=Module["_free"]=Module["asm"]["u"]).apply(null,arguments)};var _speex_resampler_init=Module["_speex_resampler_init"]=function(){return(_speex_resampler_init=Module["_speex_resampler_init"]=Module["asm"]["v"]).apply(null,arguments)};var _speex_resampler_destroy=Module["_speex_resampler_destroy"]=function(){return(_speex_resampler_destroy=Module["_speex_resampler_destroy"]=Module["asm"]["w"]).apply(null,arguments)};var _speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=function(){return(_speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=Module["asm"]["x"]).apply(null,arguments)};var dynCall_vi=Module["dynCall_vi"]=function(){return(dynCall_vi=Module["dynCall_vi"]=Module["asm"]["y"]).apply(null,arguments)};var dynCall_v=Module["dynCall_v"]=function(){return(dynCall_v=Module["dynCall_v"]=Module["asm"]["z"]).apply(null,arguments)};Module["asm"]=asm;var calledRun;Module["then"]=function(func){if(calledRun){func(Module)}else{var old=Module["onRuntimeInitialized"];Module["onRuntimeInitialized"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}noExitRuntime=true;run();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.__class__=WrapperObject;WrapperObject.__cache__={};Module["WrapperObject"]=WrapperObject;function getCache(__class__){return(__class__||WrapperObject).__cache__}Module["getCache"]=getCache;function wrapPointer(ptr,__class__){var cache=getCache(__class__);var ret=cache[ptr];if(ret)return ret;ret=Object.create((__class__||WrapperObject).prototype);ret.ptr=ptr;return cache[ptr]=ret}Module["wrapPointer"]=wrapPointer;function castObject(obj,__class__){return wrapPointer(obj.ptr,__class__)}Module["castObject"]=castObject;Module["NULL"]=wrapPointer(0);function destroy(obj){if(!obj["__destroy__"])throw"Error: Cannot destroy object. (Did you create it yourself?)";obj["__destroy__"]();delete getCache(obj.__class__)[obj.ptr]}Module["destroy"]=destroy;function compare(obj1,obj2){return obj1.ptr===obj2.ptr}Module["compare"]=compare;function getPointer(obj){return obj.ptr}Module["getPointer"]=getPointer;function getClass(obj){return obj.__class__}Module["getClass"]=getClass;var ensureCache={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ensureCache.needed){for(var i=0;i<ensureCache.temps.length;i++){Module["_free"](ensureCache.temps[i])}ensureCache.temps.length=0;Module["_free"](ensureCache.buffer);ensureCache.buffer=0;ensureCache.size+=ensureCache.needed;ensureCache.needed=0}if(!ensureCache.buffer){ensureCache.size+=128;ensureCache.buffer=Module["_malloc"](ensureCache.size);assert(ensureCache.buffer)}ensureCache.pos=0},alloc:function(array,view){assert(ensureCache.buffer);var bytes=view.BYTES_PER_ELEMENT;var len=array.length*bytes;len=len+7&-8;var ret;if(ensureCache.pos+len>=ensureCache.size){assert(len>0);ensureCache.needed+=len;ret=Module["_malloc"](len);ensureCache.temps.push(ret)}else{ret=ensureCache.buffer+ensureCache.pos;ensureCache.pos+=len}return ret},copy:function(array,view,offset){var offsetShifted=offset;var bytes=view.BYTES_PER_ELEMENT;switch(bytes){case 2:offsetShifted>>=1;break;case 4:offsetShifted>>=2;break;case 8:offsetShifted>>=3;break}for(var i=0;i<array.length;i++){view[offsetShifted+i]=array[i]}}};function VoidPtr(){throw"cannot construct a VoidPtr, no constructor in IDL"}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.__class__=VoidPtr;VoidPtr.__cache__={};Module["VoidPtr"]=VoidPtr;VoidPtr.prototype["__destroy__"]=VoidPtr.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_VoidPtr___destroy___0(self)};function Container(){this.ptr=_emscripten_bind_Container_Container_0();getCache(Container)[this.ptr]=this}Container.prototype=Object.create(WrapperObject.prototype);Container.prototype.constructor=Container;Container.prototype.__class__=Container;Container.__cache__={};Module["Container"]=Container;Container.prototype["init"]=Container.prototype.init=function(sample_rate,channel_count,serial){var self=this.ptr;if(sample_rate&&typeof sample_rate==="object")sample_rate=sample_rate.ptr;if(channel_count&&typeof channel_count==="object")channel_count=channel_count.ptr;if(serial&&typeof serial==="object")serial=serial.ptr;_emscripten_bind_Container_init_3(self,sample_rate,channel_count,serial)};Container.prototype["writeFrame"]=Container.prototype.writeFrame=function(data,size,num_samples){var self=this.ptr;if(data&&typeof data==="object")data=data.ptr;if(size&&typeof size==="object")size=size.ptr;if(num_samples&&typeof num_samples==="object")num_samples=num_samples.ptr;_emscripten_bind_Container_writeFrame_3(self,data,size,num_samples)};Container.prototype["__destroy__"]=Container.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Container___destroy___0(self)};
+var Module=typeof Module!=="undefined"?Module:{};const{EmscriptenMemoryAllocator:EmscriptenMemoryAllocator}=require("./commonFunctions.js");const OPUS_APPLICATION=2049;const OPUS_OUTPUT_SAMPLE_RATE=48e3;const OPUS_OUTPUT_MAX_LENGTH=4e3;const OPUS_FRAME_SIZE=20;const SPEEX_RESAMPLE_QUALITY=6;const BUFFER_LENGTH=4096;const OPUS_OK=0;const OPUS_SET_BITRATE_REQUEST=4002;const RESAMPLER_ERR_SUCCESS=0;class _OpusEncoder{constructor(inputSampleRate,channelCount,bitsPerSecond=undefined){this.config={inputSampleRate:inputSampleRate,channelCount:channelCount};this.memory=new EmscriptenMemoryAllocator(Module);this._opus_encoder_create=Module._opus_encoder_create;this._opus_encoder_ctl=Module._opus_encoder_ctl;this._opus_encode_float=Module._opus_encode_float;this._opus_encoder_destroy=Module._opus_encoder_destroy;this._speex_resampler_init=Module._speex_resampler_init;this._speex_resampler_process_interleaved_float=Module._speex_resampler_process_interleaved_float;this._speex_resampler_destroy=Module._speex_resampler_destroy;this._container=new Module.Container;this._container.init(OPUS_OUTPUT_SAMPLE_RATE,channelCount,Math.floor(Math.random()*4294967295));this.OpusInitCodec(OPUS_OUTPUT_SAMPLE_RATE,channelCount,bitsPerSecond);this.SpeexInitResampler(inputSampleRate,OPUS_OUTPUT_SAMPLE_RATE,channelCount);this.inputSamplesPerChannel=inputSampleRate*OPUS_FRAME_SIZE/1e3;this.outputSamplePerChannel=OPUS_OUTPUT_SAMPLE_RATE*OPUS_FRAME_SIZE/1e3;this.inputBufferIndex=0;this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*channelCount);this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*channelCount);this.mOutputBuffer=this.memory.mallocUint8Buffer(OPUS_OUTPUT_MAX_LENGTH);this.interleavedBuffers=channelCount!==1?new Float32Array(BUFFER_LENGTH*channelCount):undefined}encode(buffers){let samples=this.interleave(buffers);let sampleIndex=0;while(sampleIndex<samples.length){let lengthToCopy=Math.min(this.mInputBuffer.length-this.inputBufferIndex,samples.length-sampleIndex);this.mInputBuffer.set(samples.subarray(sampleIndex,sampleIndex+lengthToCopy),this.inputBufferIndex);this.inputBufferIndex+=lengthToCopy;if(this.inputBufferIndex>=this.mInputBuffer.length){let mInputLength=this.memory.mallocUint32(this.inputSamplesPerChannel);let mOutputLength=this.memory.mallocUint32(this.outputSamplePerChannel);let err=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,mInputLength.pointer,this.mResampledBuffer.pointer,mOutputLength.pointer);mInputLength.free();mOutputLength.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Resampling error.")}let packetLength=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(packetLength<0){throw new Error("Opus encoding error.")}this._container.writeFrame(this.mOutputBuffer.pointer,packetLength,this.outputSamplePerChannel);this.inputBufferIndex=0}sampleIndex+=lengthToCopy}}close(){const{channelCount:channelCount}=this.config;let finalFrameBuffers=[];for(let i=0;i<channelCount;++i){finalFrameBuffers.push(new Float32Array(BUFFER_LENGTH-this.inputBufferIndex/channelCount))}this.encode(finalFrameBuffers);Module.destroy(this._container);this.mInputBuffer.free();this.mResampledBuffer.free();this.mOutputBuffer.free();this._opus_encoder_destroy(this.encoder);this._speex_resampler_destroy(this.resampler)}interleave(channelBuffers){const chCount=channelBuffers.length;if(chCount===1){return channelBuffers[0]}for(let ch=0;ch<chCount;ch++){let buffer=channelBuffers[ch];for(let i=0;i<buffer.length;i++){this.interleavedBuffers[i*chCount+ch]=buffer[i]}}return this.interleavedBuffers}OpusInitCodec(outRate,chCount,bitRate=undefined){let mErr=this.memory.mallocUint32(undefined);this.encoder=this._opus_encoder_create(outRate,chCount,OPUS_APPLICATION,mErr.pointer);let err=mErr.value;mErr.free();if(err!==OPUS_OK){throw new Error("Opus encodor initialization failed.")}if(bitRate){this.OpusSetOpusControl(OPUS_SET_BITRATE_REQUEST,bitRate)}}OpusSetOpusControl(request,vaArg){let value=this.memory.mallocInt32(vaArg);this._opus_encoder_ctl(this.encoder,request,value.pointer);value.free()}SpeexInitResampler(inputRate,outputRate,chCount){let mErr=this.memory.mallocUint32(undefined);this.resampler=this._speex_resampler_init(chCount,inputRate,outputRate,SPEEX_RESAMPLE_QUALITY,mErr.pointer);let err=mErr.value;mErr.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Initializing resampler failed.")}}}Module.init=function(inputSampleRate,channelCount,bitsPerSecond){Module.encodedBuffers=[];Module.encoder=new _OpusEncoder(inputSampleRate,channelCount,bitsPerSecond)};Module.encode=function(buffers){Module.encoder.encode(buffers)};Module.flush=function(){return Module.encodedBuffers.splice(0,Module.encodedBuffers.length)};Module.close=function(){Module.encoder.close()};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_HAS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_HAS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER;ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){scriptDirectory=__dirname+"/";read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){return read(f)}}readBinary=function readBinary(f){var data;if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function shell_read(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime;if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];if(typeof WebAssembly!=="object"){err("no native wasm support detected")}var wasmMemory;var wasmTable=new WebAssembly.Table({"initial":36,"maximum":36+0,"element":"anyfunc"});var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;var WASM_PAGE_SIZE=65536;var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var DYNAMIC_BASE=5288848,DYNAMICTOP_PTR=45808;var INITIAL_TOTAL_MEMORY=Module["TOTAL_MEMORY"]||16777216;if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{wasmMemory=new WebAssembly.Memory({"initial":INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE,"maximum":INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE})}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_TOTAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPreMain(cb){__ATMAIN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";out(what);err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";throw new WebAssembly.RuntimeError(what)}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var wasmBinaryFile="OggOpusEncoder.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(){try{if(wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(wasmBinaryFile)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary()})}return new Promise(function(resolve,reject){resolve(getBinary())})}function createWasm(){var info={"env":asmLibraryArg,"wasi_snapshot_preview1":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module["asm"]=exports;removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiatedSource(output){receiveInstance(output["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&typeof fetch==="function"){fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync();return{}}function emscriptenPushBuffer(buf,len){let array=new Uint8Array(Module.HEAPU8.buffer,buf,len);Module.encodedBuffers.push(new Uint8Array(array).buffer)}__ATINIT__.push({func:function(){___wasm_call_ctors()}});function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}function _abort(){abort()}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest)}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};var SYSCALLS={buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=UTF8ToString(SYSCALLS.get());return ret},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();return low},getZero:function(){SYSCALLS.get()}};function _fd_close(fd){try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_write(fd,iov,iovcnt,pnum){try{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(fd,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}var asmLibraryArg={"a":___assert_fail,"b":_abort,"c":emscriptenPushBuffer,"e":_emscripten_memcpy_big,"f":_emscripten_resize_heap,"h":_fd_close,"d":_fd_seek,"g":_fd_write,"memory":wasmMemory,"table":wasmTable};var asm=createWasm();Module["asm"]=asm;var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return Module["asm"]["i"].apply(null,arguments)};var ___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=function(){return Module["asm"]["j"].apply(null,arguments)};var _emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=function(){return Module["asm"]["k"].apply(null,arguments)};var _emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=function(){return Module["asm"]["l"].apply(null,arguments)};var _emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=function(){return Module["asm"]["m"].apply(null,arguments)};var _emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=function(){return Module["asm"]["n"].apply(null,arguments)};var _emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=function(){return Module["asm"]["o"].apply(null,arguments)};var _opus_encoder_create=Module["_opus_encoder_create"]=function(){return Module["asm"]["p"].apply(null,arguments)};var _opus_encode_float=Module["_opus_encode_float"]=function(){return Module["asm"]["q"].apply(null,arguments)};var _opus_encoder_ctl=Module["_opus_encoder_ctl"]=function(){return Module["asm"]["r"].apply(null,arguments)};var _opus_encoder_destroy=Module["_opus_encoder_destroy"]=function(){return Module["asm"]["s"].apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return Module["asm"]["t"].apply(null,arguments)};var _free=Module["_free"]=function(){return Module["asm"]["u"].apply(null,arguments)};var _speex_resampler_init=Module["_speex_resampler_init"]=function(){return Module["asm"]["v"].apply(null,arguments)};var _speex_resampler_destroy=Module["_speex_resampler_destroy"]=function(){return Module["asm"]["w"].apply(null,arguments)};var _speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=function(){return Module["asm"]["x"].apply(null,arguments)};var dynCall_vi=Module["dynCall_vi"]=function(){return Module["asm"]["y"].apply(null,arguments)};var dynCall_v=Module["dynCall_v"]=function(){return Module["asm"]["z"].apply(null,arguments)};Module["asm"]=asm;var calledRun;Module["then"]=function(func){if(calledRun){func(Module)}else{var old=Module["onRuntimeInitialized"];Module["onRuntimeInitialized"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}noExitRuntime=true;run();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.__class__=WrapperObject;WrapperObject.__cache__={};Module["WrapperObject"]=WrapperObject;function getCache(__class__){return(__class__||WrapperObject).__cache__}Module["getCache"]=getCache;function wrapPointer(ptr,__class__){var cache=getCache(__class__);var ret=cache[ptr];if(ret)return ret;ret=Object.create((__class__||WrapperObject).prototype);ret.ptr=ptr;return cache[ptr]=ret}Module["wrapPointer"]=wrapPointer;function castObject(obj,__class__){return wrapPointer(obj.ptr,__class__)}Module["castObject"]=castObject;Module["NULL"]=wrapPointer(0);function destroy(obj){if(!obj["__destroy__"])throw"Error: Cannot destroy object. (Did you create it yourself?)";obj["__destroy__"]();delete getCache(obj.__class__)[obj.ptr]}Module["destroy"]=destroy;function compare(obj1,obj2){return obj1.ptr===obj2.ptr}Module["compare"]=compare;function getPointer(obj){return obj.ptr}Module["getPointer"]=getPointer;function getClass(obj){return obj.__class__}Module["getClass"]=getClass;var ensureCache={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ensureCache.needed){for(var i=0;i<ensureCache.temps.length;i++){Module["_free"](ensureCache.temps[i])}ensureCache.temps.length=0;Module["_free"](ensureCache.buffer);ensureCache.buffer=0;ensureCache.size+=ensureCache.needed;ensureCache.needed=0}if(!ensureCache.buffer){ensureCache.size+=128;ensureCache.buffer=Module["_malloc"](ensureCache.size);assert(ensureCache.buffer)}ensureCache.pos=0},alloc:function(array,view){assert(ensureCache.buffer);var bytes=view.BYTES_PER_ELEMENT;var len=array.length*bytes;len=len+7&-8;var ret;if(ensureCache.pos+len>=ensureCache.size){assert(len>0);ensureCache.needed+=len;ret=Module["_malloc"](len);ensureCache.temps.push(ret)}else{ret=ensureCache.buffer+ensureCache.pos;ensureCache.pos+=len}return ret},copy:function(array,view,offset){var offsetShifted=offset;var bytes=view.BYTES_PER_ELEMENT;switch(bytes){case 2:offsetShifted>>=1;break;case 4:offsetShifted>>=2;break;case 8:offsetShifted>>=3;break}for(var i=0;i<array.length;i++){view[offsetShifted+i]=array[i]}}};function VoidPtr(){throw"cannot construct a VoidPtr, no constructor in IDL"}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.__class__=VoidPtr;VoidPtr.__cache__={};Module["VoidPtr"]=VoidPtr;VoidPtr.prototype["__destroy__"]=VoidPtr.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_VoidPtr___destroy___0(self)};function Container(){this.ptr=_emscripten_bind_Container_Container_0();getCache(Container)[this.ptr]=this}Container.prototype=Object.create(WrapperObject.prototype);Container.prototype.constructor=Container;Container.prototype.__class__=Container;Container.__cache__={};Module["Container"]=Container;Container.prototype["init"]=Container.prototype.init=function(sample_rate,channel_count,serial){var self=this.ptr;if(sample_rate&&typeof sample_rate==="object")sample_rate=sample_rate.ptr;if(channel_count&&typeof channel_count==="object")channel_count=channel_count.ptr;if(serial&&typeof serial==="object")serial=serial.ptr;_emscripten_bind_Container_init_3(self,sample_rate,channel_count,serial)};Container.prototype["writeFrame"]=Container.prototype.writeFrame=function(data,size,num_samples){var self=this.ptr;if(data&&typeof data==="object")data=data.ptr;if(size&&typeof size==="object")size=size.ptr;if(num_samples&&typeof num_samples==="object")num_samples=num_samples.ptr;_emscripten_bind_Container_writeFrame_3(self,data,size,num_samples)};Container.prototype["__destroy__"]=Container.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Container___destroy___0(self)};(function(){function setupEnums(){}if(runtimeInitialized)setupEnums();else addOnPreMain(setupEnums)})();
 
 
   return Module
diff --git a/node_modules/opus-media-recorder/OggOpusEncoder.wasm b/node_modules/opus-media-recorder/OggOpusEncoder.wasm
index e2db045..a0d5950 100644
Binary files a/node_modules/opus-media-recorder/OggOpusEncoder.wasm and b/node_modules/opus-media-recorder/OggOpusEncoder.wasm differ
diff --git a/node_modules/opus-media-recorder/OpusMediaRecorder.js b/node_modules/opus-media-recorder/OpusMediaRecorder.js
index ebf4a57..438a3c7 100644
--- a/node_modules/opus-media-recorder/OpusMediaRecorder.js
+++ b/node_modules/opus-media-recorder/OpusMediaRecorder.js
@@ -1,565 +1,566 @@
-const { EventTarget, defineEventAttribute } = require('event-target-shim');
-const { detect } = require('detect-browser');
-const browser = detect();
+const { EventTarget, defineEventAttribute } = require('event-target-shim')
+const { detect } = require('detect-browser')
+const browser = detect()
 
-const AudioContext = global.AudioContext || global.webkitAudioContext;
-const BUFFER_SIZE = 4096;
+const AudioContext = window.AudioContext || window.webkitAudioContext
+const BUFFER_SIZE = 4096
 
 /**
  * Reference: https://w3c.github.io/mediacapture-record/#mediarecorder-api
  * @extends EventTarget
  */
 class OpusMediaRecorder extends EventTarget {
-  /**
-   * A function that returns the encoder web worker
-   * @name workerFactory
-   * @function
-   * @returns {worker} An instance of ./encoderWorker.js web worker.
-   */
-
-  /**
-   *
-   * @param {MediaStream} stream - The MediaStream to be recorded. This will
-   *          be the value of the stream attribute.
-   * @param {MediaRecorderOptions} [options] - A dictionary of options to for
-   *          the UA instructing how the recording will take part.
-   *          options.mimeType, if present, will become the value of mimeType
-   *          attribute.
-   * @param {Object} [workerOptions] This is a NON-STANDARD options to
-   *          configure how to import the web worker .wasm compiled binaries
-   *          used for encoding.
-   * @param {workerFactory} [workerOptions.encoderWorkerFactory] A factory
-   *          function that create a web worker instance of ./encoderWorker.js
-   *          and returns it. function(){return new Worker('./encoderWorker.umd.js')}
-   *          is used by default. This is NON-STANDARD.
-   * @param {string} [workerOptions.OggOpusEncoderWasmPath]
-   *          Path of ./OggOpusEncoder.wasm which is used for OGG Opus encoding
-   *          by the encoder worker. This is NON-STANDARD.
-   * @param {string} [workerOptions.WebMOpusEncoderWasmPath]
-   *          Path of ./WebMOpusEncoder.wasm which is used for WebM Opus encoding
-   *          by the encoder worker. This is NON-STANDARD.
-   */
-  constructor (stream, options = {}, workerOptions = {}) {
-    const { mimeType, audioBitsPerSecond, videoBitsPerSecond, bitsPerSecond } = options; // eslint-disable-line
-    // NON-STANDARD options
-    const { encoderWorkerFactory, OggOpusEncoderWasmPath, WebMOpusEncoderWasmPath } = workerOptions;
-
-    super();
-    // Attributes for the specification conformance. These have their own getters.
-    this._stream = stream;
-    this._state = 'inactive';
-    this._mimeType = mimeType || '';
-    this._audioBitsPerSecond = audioBitsPerSecond || bitsPerSecond;
-    /** @type {'inactive'|'readyToInit'|'encoding'|'closed'} */
-    this.workerState = 'inactive';
-
-    // Parse MIME Type
-    if (!OpusMediaRecorder.isTypeSupported(this._mimeType)) {
-      throw new TypeError('invalid arguments, a MIME Type is not supported');
-    }
-    switch (OpusMediaRecorder._parseType(this._mimeType).subtype) {
-      case 'wave':
-      case 'wav':
-        this._mimeType = 'audio/wave';
-        break;
-
-      case 'webm':
-        this._mimeType = 'audio/webm';
-        break;
-
-      case 'ogg':
-        this._mimeType = 'audio/ogg';
-        break;
-
-      default:
-        // Select a type depending on OS.
-        switch (browser && browser.name) {
-          case 'chrome':
-            this._mimeType = 'audio/webm';
-            break;
-
-          case 'firefox':
-            this._mimeType = 'audio/ogg';
-            break;
-
-          case 'edge':
-            this._mimeType = 'audio/webm';
-            break;
-
-          case 'ios':
-          case 'safari':
-            this._mimeType = 'audio/wave';
-            break;
-
-          default:
-            this._mimeType = 'audio/webm';
-        }
-    }
-    switch (this._mimeType) {
-      case 'audio/wave':
-        this._wasmPath = ''; // wasm is not used
-        break;
-
-      case 'audio/webm':
-        this._wasmPath = WebMOpusEncoderWasmPath || '';
-        break;
-
-      case 'audio/ogg':
-        this._wasmPath = OggOpusEncoderWasmPath || '';
-        break;
-
-      default:
-        throw new Error(`Internal Error: Unexpected MIME Type: ${this._mimeType}`);
-    }
-
-    // Get current directory for worker
-    let workerDir = '';
-    if (document.currentScript) {
-      workerDir = document.currentScript.src;
-    } else if (self.location) {
-      workerDir = self.location.href;
-    }
-    workerDir = workerDir.substr(0, workerDir.lastIndexOf('/')) +
-                '/encoderWorker.umd.js';
-    // If worker function is imported via <script> tag, make it blob to get URL.
-    if (typeof OpusMediaRecorder.encoderWorker === 'function') {
-      workerDir = URL.createObjectURL(new Blob([`(${OpusMediaRecorder.encoderWorker})()`]));
-    }
-
-    // Spawn a encoder worker
-    this._workerFactory = typeof encoderWorkerFactory === 'function'
-                            ? encoderWorkerFactory
-                            : _ => new Worker(workerDir);
-    this._spawnWorker();
-  }
-
-  /**
-   * The MediaStream [GETUSERMEDIA] to be recorded.
-   * @return {MediaStream}
-   */
-  get stream () {
-    return this._stream;
-  }
-
-  /**
-   * The MIME type [RFC2046] that has been selected as the container for
-   * recording. This entry includes all the parameters to the base
-   * mimeType. The UA should be able to play back any of the MIME types
-   * it supports for recording. For example, it should be able to display
-   * a video recording in the HTML <video> tag. The default value for
-   * this property is platform-specific.
-   * @return {string}
-   */
-  get mimeType () {
-    return this._mimeType;
-  }
-
-  /**
-   * The current state of the OpusMediaRecorder object. When the OpusMediaRecorder
-   * is created, the UA MUST set this attribute to inactive.
-   * @return {"inactive"|"recording"|"paused"}
-   */
-  get state () {
-    return this._state;
-  }
-
-  /**
-   * The value of the Video encoding. Unsupported.
-   * @return {undefined}
-   */
-  get videoBitsPerSecond () {
-    // Video encoding is not supported
-    return undefined;
-  }
-
-  /**
-   * The value of the Audio encoding target bit rate that was passed to
-   * the Platform (potentially truncated, rounded, etc), or the calculated one
-   * if the user has specified bitsPerSecond.
-   * @return {number|undefined}
-   */
-  get audioBitsPerSecond () {
-    return this._audioBitsPerSecond;
-  }
-
-  /**
-   * Initialize worker
-   */
-  _spawnWorker () {
-    this.worker = this._workerFactory();
-    this.worker.onmessage = (e) => this._onmessageFromWorker(e);
-    this.worker.onerror = (e) => this._onerrorFromWorker(e);
-
-    this._postMessageToWorker('loadEncoder',
-                              { mimeType: this._mimeType,
-                                wasmPath: this._wasmPath });
-  }
-
-  /**
-   * Post message to the encoder web worker.
-   * @param {"init"|"pushInputData"|"getEncodedData"|"done"} command - Type of message to send to the worker
-   * @param {object} message - Payload to the worker
-   */
-  _postMessageToWorker (command, message = {}) {
-    switch (command) {
-      case 'loadEncoder':
-        let { mimeType, wasmPath } = message;
-        this.worker.postMessage({ command, mimeType, wasmPath });
-        break;
-
-      case 'init':
-        // Initialize the worker
-        let { sampleRate, channelCount, bitsPerSecond } = message;
-        this.worker.postMessage({ command, sampleRate, channelCount, bitsPerSecond });
-        this.workerState = 'encoding';
-
-        // Start streaming
-        this.source.connect(this.processor);
-        this.processor.connect(this.context.destination);
-        let eventToPush = new global.Event('start');
-        this.dispatchEvent(eventToPush);
-        break;
-
-      case 'pushInputData':
-        // Pass input audio buffer to the encoder to encode.
-        // The worker MAY trigger 'encodedData'.
-        let { channelBuffers, length, duration } = message;
-        this.worker.postMessage({
-          command, channelBuffers, length, duration
-        });
-        break;
-
-      case 'getEncodedData':
-        // Request encoded result.
-        // Expected 'encodedData' event from the worker
-        this.worker.postMessage({ command });
-        break;
-
-      case 'done':
-        // Tell encoder finallize the job and destory itself.
-        // Expected 'lastEncodedData' event from the worker.
-        this.worker.postMessage({ command });
-        break;
-
-      default:
-        // This is an error case
-        throw new Error('Internal Error: Incorrect postMessage requested.');
-    }
-  }
-
-  /**
-   * onmessage() callback from the worker.
-   * @param {message} event - message from the worker
-   */
-  _onmessageFromWorker (event) {
-    const { command, buffers } = event.data;
-    let eventToPush;
-    switch (command) {
-      case 'readyToInit':
-        const { sampleRate, channelCount } = this;
-        this.workerState = 'readyToInit';
-
-        // If start() is already called initialize worker
-        if (this.state === 'recording') {
-          this._postMessageToWorker('init',
-                                    { sampleRate,
-                                      channelCount,
-                                      bitsPerSecond: this.audioBitsPerSecond});
-        }
-        break;
-
-      case 'encodedData':
-      case 'lastEncodedData':
-        let data = new Blob(buffers, {'type': this._mimeType});
-        eventToPush = new global.Event('dataavailable');
-        eventToPush.data = data;
-        this.dispatchEvent(eventToPush);
-
-        // Detect of stop() called before
-        if (command === 'lastEncodedData') {
-          eventToPush = new global.Event('stop');
-          this.dispatchEvent(eventToPush);
-
-          this.workerState = 'closed';
-        }
-        break;
-
-      default:
-        break; // Ignore
-    }
-  }
-
-  /**
-   * onerror() callback from the worker.
-   * @param {ErrorEvent} error - error object from the worker
-   */
-  _onerrorFromWorker (error) {
-    // Stop stream first
-    this.source.disconnect();
-    this.processor.disconnect();
-
-    this.worker.terminate();
-    this.workerState = 'closed';
-
-    // Send message to host
-    let message = [
-      'FileName: ' + error.filename,
-      'LineNumber: ' + error.lineno,
-      'Message: ' + error.message
-    ].join(' - ');
-    let errorToPush = new global.Event('error');
-    errorToPush.name = 'UnknownError';
-    errorToPush.message = message;
-    this.dispatchEvent(errorToPush);
-  }
-
-  /**
-   * Enable onaudioprocess() callback.
-   * @param {number} timeslice - In seconds. OpusMediaRecorder should request data
-   *                              from the worker every timeslice seconds.
-   */
-  _enableAudioProcessCallback (timeslice) {
-    // pass frame buffers to the worker
-    let elapsedTime = 0;
-    this.processor.onaudioprocess = (e) => {
-      const { inputBuffer, playbackTime } = e; // eslint-disable-line
-      const { sampleRate, length, duration, numberOfChannels } = inputBuffer; // eslint-disable-line
-
-      // Create channel buffers to pass to the worker
-      const channelBuffers = new Array(numberOfChannels);
-      for (let i = 0; i < numberOfChannels; i++) {
-        channelBuffers[i] = inputBuffer.getChannelData(i);
-      }
-
-      // Pass data to the worker
-      const message = { channelBuffers, length, duration };
-      this._postMessageToWorker('pushInputData', message);
-
-      // Calculate time
-      elapsedTime += duration;
-      if (elapsedTime >= timeslice) {
-        this._postMessageToWorker('getEncodedData');
-        elapsedTime = 0;
-      }
-    };
-  }
-
-  /**
-   * Begins recording media; this method can optionally be passed a timeslice
-   * argument with a value in milliseconds.
-   * @param {number} timeslice - If this is specified, the media will be captured
-   *        in separate chunks of that duration, rather than the default behavior
-   *        of recording the media in a single large chunk. In other words, an
-   *        undefined value of timeslice will be understood as the largest long value.
-   */
-  start (timeslice = Number.MAX_SAFE_INTEGER) {
-    if (this.state !== 'inactive') {
-      throw new Error('DOMException: INVALID_STATE_ERR, state must be inactive.');
-    }
-    if (timeslice < 0) {
-      throw new TypeError('invalid arguments, timeslice should be 0 or higher.');
-    }
-    timeslice /= 1000; // Convert milliseconds to seconds
-
-    // Check worker is closed (usually by stop()) and init.
-    if (this.workerState === 'closed') {
-      this._spawnWorker();
-    }
-
-    // Get channel count and sampling rate
-    // channelCount: https://www.w3.org/TR/mediacapture-streams/#media-track-settings
-    // sampleRate: https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/sampleRate
-    this.context = new AudioContext();
-    let tracks = this.stream.getAudioTracks();
-    if (!tracks[0]) {
-      throw new Error('DOMException: UnkownError, media track not found.');
-    }
-    this.channelCount = tracks[0].getSettings().channelCount || 1;
-    this.sampleRate = this.context.sampleRate;
-
-    /** @type {MediaStreamAudioSourceNode} */
-    this.source = this.context.createMediaStreamSource(this.stream);
-    /** @type {ScriptProcessorNode} */
-    this.processor = this.context.createScriptProcessor(BUFFER_SIZE, this.channelCount, this.channelCount);
-
-    // Start recording
-    this._state = 'recording';
-    this._enableAudioProcessCallback(timeslice);
-
-    // If the worker is already loaded then start
-    if (this.workerState === 'readyToInit') {
-      const { sampleRate, channelCount } = this;
-      this._postMessageToWorker('init',
-                                { sampleRate,
-                                  channelCount,
-                                  bitsPerSecond: this.audioBitsPerSecond });
-    }
-  }
-
-  /**
-   * Stops recording, at which point a dataavailable event containing
-   * the final Blob of saved data is fired. No more recording occurs.
-   */
-  stop () {
-    if (this.state === 'inactive') {
-      throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.');
-    }
-
-    // Stop stream first
-    this.source.disconnect();
-    this.processor.disconnect();
-    this.context.close();
-
-    // Stop event will be triggered at _onmessageFromWorker(),
-    this._postMessageToWorker('done');
-
-    this._state = 'inactive';
-  }
-
-  /**
-   * Pauses the recording of media.
-   */
-  pause () {
-    if (this.state === 'inactive') {
-      throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.');
-    }
-
-    // Stop stream first
-    this.source.disconnect();
-    this.processor.disconnect();
-
-    let event = new global.Event('pause');
-    this.dispatchEvent(event);
-    this._state = 'paused';
-  }
-
-  /**
-   * Resumes recording of media after having been paused.
-   */
-  resume () {
-    if (this.state === 'inactive') {
-      throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.');
-    }
-
-    // Restart streaming data
-    this.source.connect(this.processor);
-    this.processor.connect(this.context.destination);
-
-    let event = new global.Event('resume');
-    this.dispatchEvent(event);
-    this._state = 'recording';
-  }
-
-  /**
-   * Requests a Blob containing the saved data received thus far (or since
-   * the last time requestData() was called. After calling this method,
-   * recording continues, but in a new Blob.
-   */
-  requestData () {
-    if (this.state === 'inactive') {
-      throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.');
-    }
-
-    // dataavailable event will be triggerd at _onmessageFromWorker()
-    this._postMessageToWorker('getEncodedData');
-  }
-
-  /**
-   * Returns a Boolean value indicating if the given MIME type is supported
-   * by the current user agent .
-   * @param {string} typeType - A MIME Type, including parameters when needed,
-   *          specifying a container and/or codec formats for recording.
-   * @return {boolean}
-   */
-  static isTypeSupported (mimeType) {
-    // See: https://w3c.github.io/mediacapture-record/#dom-mediarecorder-istypesupported
-
-    // 1. If empty string, return true.
-    if (typeof mimeType === 'string' && !mimeType) {
-      return true;
-    }
-    try {
-      var {type, subtype, codec} = OpusMediaRecorder._parseType(mimeType);
-    } catch (error) {
-      // 2. If not a valid string, return false.
-      return false;
-    }
-    if (type !== 'audio' ||
-      !(subtype === 'ogg' || subtype === 'webm' ||
-        subtype === 'wave' || subtype === 'wav')) {
-      // 3,4. If type and subtype are unsupported the return false.
-      return false;
-    }
-    // 5. If codec is unsupported then return false.
-    // 6. If the specified combination of all is not supported than return false.
-    switch (subtype) {
-      case 'ogg':
-        if (codec !== 'opus' && codec) {
-          return false;
-        }
-        break;
-      case 'webm':
-        if (codec !== 'opus' && codec) {
-          return false;
-        }
-        break;
-      case 'wave':
-      case 'wav':
-        if (codec) {
-          return false; // Currently only supports signed 16 bits
-        }
-        break;
-    }
-    // 7. return true.
-    return true;
-  }
-
-  /**
-   * Parse MIME. A helper function for isTypeSupported() and etc.
-   * @param {string} mimeType - typeType - A MIME Type, including parameters when needed,
-   *          specifying a container and/or codec formats for recording.
-   * @return {?object} - An object with type, subtype, codec attributes
-   *          if parsed correctly. null is returned if parsing failed.
-   *          If mimeType is an empty string then return an object with attributes
-   *          are empty strings
-   */
-  static _parseType (mimeType) {
-    try {
-      const regex = /^(\w+)\/(\w+)(;\s*codecs=(\w+))?$/;
-      var [, type, subtype, , codec] = mimeType.match(regex);
-    } catch (error) {
-      if (typeof mimeType === 'string' && !mimeType) {
-        return {type: '', subtype: '', codec: ''};
-      }
-      return null;
-    }
-    return {type, subtype, codec};
-  }
+	/**
+	 * A function that returns the encoder web worker
+	 * @name workerFactory
+	 * @function
+	 * @returns {worker} An instance of ./encoderWorker.js web worker.
+	 */
+
+	/**
+	 *
+	 * @param {MediaStream} stream - The MediaStream to be recorded. This will
+	 *          be the value of the stream attribute.
+	 * @param {MediaRecorderOptions} [options] - A dictionary of options to for
+	 *          the UA instructing how the recording will take part.
+	 *          options.mimeType, if present, will become the value of mimeType
+	 *          attribute.
+	 * @param {Object} [workerOptions] This is a NON-STANDARD options to
+	 *          configure how to import the web worker .wasm compiled binaries
+	 *          used for encoding.
+	 * @param {workerFactory} [workerOptions.encoderWorkerFactory] A factory
+	 *          function that create a web worker instance of ./encoderWorker.js
+	 *          and returns it. function(){return new Worker('./encoderWorker.umd.js')}
+	 *          is used by default. This is NON-STANDARD.
+	 * @param {string} [workerOptions.OggOpusEncoderWasmPath]
+	 *          Path of ./OggOpusEncoder.wasm which is used for OGG Opus encoding
+	 *          by the encoder worker. This is NON-STANDARD.
+	 * @param {string} [workerOptions.WebMOpusEncoderWasmPath]
+	 *          Path of ./WebMOpusEncoder.wasm which is used for WebM Opus encoding
+	 *          by the encoder worker. This is NON-STANDARD.
+	 */
+	constructor(stream, options = {}, workerOptions = {}) {
+		const { mimeType, audioBitsPerSecond, videoBitsPerSecond, bitsPerSecond } = options // eslint-disable-line
+		// NON-STANDARD options
+		const { encoderWorkerFactory, OggOpusEncoderWasmPath, WebMOpusEncoderWasmPath } = workerOptions
+
+		super()
+		// Attributes for the specification conformance. These have their own getters.
+		this._stream = stream
+		this._state = 'inactive'
+		this._mimeType = mimeType || ''
+		this._audioBitsPerSecond = audioBitsPerSecond || bitsPerSecond
+		/** @type {'inactive'|'readyToInit'|'encoding'|'closed'} */
+		this.workerState = 'inactive'
+
+		// Parse MIME Type
+		if (!OpusMediaRecorder.isTypeSupported(this._mimeType)) {
+			throw new TypeError('invalid arguments, a MIME Type is not supported')
+		}
+		switch (OpusMediaRecorder._parseType(this._mimeType).subtype) {
+			case 'wave':
+			case 'wav':
+				this._mimeType = 'audio/wave'
+				break
+
+			case 'webm':
+				this._mimeType = 'audio/webm'
+				break
+
+			case 'ogg':
+				this._mimeType = 'audio/ogg'
+				break
+
+			default:
+				// Select a type depending on OS.
+				switch (browser && browser.name) {
+					case 'chrome':
+						this._mimeType = 'audio/webm'
+						break
+
+					case 'firefox':
+						this._mimeType = 'audio/ogg'
+						break
+
+					case 'edge':
+						this._mimeType = 'audio/webm'
+						break
+
+					case 'ios':
+					case 'safari':
+						this._mimeType = 'audio/wave'
+						break
+
+					default:
+						this._mimeType = 'audio/webm'
+				}
+		}
+		switch (this._mimeType) {
+			case 'audio/wave':
+				this._wasmPath = '' // wasm is not used
+				break
+
+			case 'audio/webm':
+				this._wasmPath = WebMOpusEncoderWasmPath || ''
+				break
+
+			case 'audio/ogg':
+				this._wasmPath = OggOpusEncoderWasmPath || ''
+				break
+
+			default:
+				throw new Error(`Internal Error: Unexpected MIME Type: ${this._mimeType}`)
+		}
+
+		// Get current directory for worker
+		let workerDir = ''
+		if (document.currentScript) {
+			workerDir = document.currentScript.src
+		} else if (self.location) {
+			workerDir = self.location.href
+		}
+		workerDir = workerDir.substr(0, workerDir.lastIndexOf('/')) + '/encoderWorker.umd.js'
+		// If worker function is imported via <script> tag, make it blob to get URL.
+		if (typeof OpusMediaRecorder.encoderWorker === 'function') {
+			workerDir = URL.createObjectURL(new Blob([`(${OpusMediaRecorder.encoderWorker})()`]))
+		}
+
+		// Spawn a encoder worker
+		this._workerFactory =
+			typeof encoderWorkerFactory === 'function' ? encoderWorkerFactory : _ => new Worker(workerDir)
+		this._spawnWorker()
+	}
+
+	/**
+	 * The MediaStream [GETUSERMEDIA] to be recorded.
+	 * @return {MediaStream}
+	 */
+	get stream() {
+		return this._stream
+	}
+
+	/**
+	 * The MIME type [RFC2046] that has been selected as the container for
+	 * recording. This entry includes all the parameters to the base
+	 * mimeType. The UA should be able to play back any of the MIME types
+	 * it supports for recording. For example, it should be able to display
+	 * a video recording in the HTML <video> tag. The default value for
+	 * this property is platform-specific.
+	 * @return {string}
+	 */
+	get mimeType() {
+		return this._mimeType
+	}
+
+	/**
+	 * The current state of the OpusMediaRecorder object. When the OpusMediaRecorder
+	 * is created, the UA MUST set this attribute to inactive.
+	 * @return {"inactive"|"recording"|"paused"}
+	 */
+	get state() {
+		return this._state
+	}
+
+	/**
+	 * The value of the Video encoding. Unsupported.
+	 * @return {undefined}
+	 */
+	get videoBitsPerSecond() {
+		// Video encoding is not supported
+		return undefined
+	}
+
+	/**
+	 * The value of the Audio encoding target bit rate that was passed to
+	 * the Platform (potentially truncated, rounded, etc), or the calculated one
+	 * if the user has specified bitsPerSecond.
+	 * @return {number|undefined}
+	 */
+	get audioBitsPerSecond() {
+		return this._audioBitsPerSecond
+	}
+
+	/**
+	 * Initialize worker
+	 */
+	_spawnWorker() {
+		this.worker = this._workerFactory()
+		this.worker.onmessage = e => this._onmessageFromWorker(e)
+		this.worker.onerror = e => this._onerrorFromWorker(e)
+
+		this._postMessageToWorker('loadEncoder', { mimeType: this._mimeType, wasmPath: this._wasmPath })
+	}
+
+	/**
+	 * Post message to the encoder web worker.
+	 * @param {"init"|"pushInputData"|"getEncodedData"|"done"} command - Type of message to send to the worker
+	 * @param {object} message - Payload to the worker
+	 */
+	_postMessageToWorker(command, message = {}) {
+		switch (command) {
+			case 'loadEncoder':
+				let { mimeType, wasmPath } = message
+				this.worker.postMessage({ command, mimeType, wasmPath })
+				break
+
+			case 'init':
+				// Initialize the worker
+				let { sampleRate, channelCount, bitsPerSecond } = message
+				this.worker.postMessage({ command, sampleRate, channelCount, bitsPerSecond })
+				this.workerState = 'encoding'
+
+				// Start streaming
+				this.source.connect(this.processor)
+				this.processor.connect(this.context.destination)
+				let eventToPush = new window.Event('start')
+				this.dispatchEvent(eventToPush)
+				break
+
+			case 'pushInputData':
+				// Pass input audio buffer to the encoder to encode.
+				// The worker MAY trigger 'encodedData'.
+				let { channelBuffers, length, duration } = message
+				this.worker.postMessage({ command, channelBuffers, length, duration })
+				break
+
+			case 'getEncodedData':
+				// Request encoded result.
+				// Expected 'encodedData' event from the worker
+				this.worker.postMessage({ command })
+				break
+
+			case 'done':
+				// Tell encoder finallize the job and destory itself.
+				// Expected 'lastEncodedData' event from the worker.
+				this.worker.postMessage({ command })
+				break
+
+			default:
+				// This is an error case
+				throw new Error('Internal Error: Incorrect postMessage requested.')
+		}
+	}
+
+	/**
+	 * onmessage() callback from the worker.
+	 * @param {message} event - message from the worker
+	 */
+	_onmessageFromWorker(event) {
+		const { command, buffers } = event.data
+		let eventToPush
+		switch (command) {
+			case 'readyToInit':
+				const { sampleRate, channelCount } = this
+				this.workerState = 'readyToInit'
+
+				// If start() is already called initialize worker
+				if (this.state === 'recording') {
+					this._postMessageToWorker('init', {
+						sampleRate,
+						channelCount,
+						bitsPerSecond: this.audioBitsPerSecond,
+					})
+				}
+				break
+
+			case 'encodedData':
+			case 'lastEncodedData':
+				let data = new Blob(buffers, { type: this._mimeType })
+				eventToPush = new window.Event('dataavailable')
+				eventToPush.data = data
+				this.dispatchEvent(eventToPush)
+
+				// Detect of stop() called before
+				if (command === 'lastEncodedData') {
+					eventToPush = new window.Event('stop')
+					this.dispatchEvent(eventToPush)
+
+					this.workerState = 'closed'
+				}
+				break
+
+			default:
+				break // Ignore
+		}
+	}
+
+	/**
+	 * onerror() callback from the worker.
+	 * @param {ErrorEvent} error - error object from the worker
+	 */
+	_onerrorFromWorker(error) {
+		// Stop stream first
+		this.source.disconnect()
+		this.processor.disconnect()
+
+		this.worker.terminate()
+		this.workerState = 'closed'
+
+		// Send message to host
+		let message = [
+			'FileName: ' + error.filename,
+			'LineNumber: ' + error.lineno,
+			'Message: ' + error.message,
+		].join(' - ')
+		let errorToPush = new window.Event('error')
+		errorToPush.name = 'UnknownError'
+		errorToPush.message = message
+		this.dispatchEvent(errorToPush)
+	}
+
+	/**
+	 * Enable onaudioprocess() callback.
+	 * @param {number} timeslice - In seconds. OpusMediaRecorder should request data
+	 *                              from the worker every timeslice seconds.
+	 */
+	_enableAudioProcessCallback(timeslice) {
+		// pass frame buffers to the worker
+		let elapsedTime = 0
+		this.processor.onaudioprocess = e => {
+			const { inputBuffer, playbackTime } = e // eslint-disable-line
+			const { sampleRate, length, duration, numberOfChannels } = inputBuffer // eslint-disable-line
+
+			// Create channel buffers to pass to the worker
+			const channelBuffers = new Array(numberOfChannels)
+			for (let i = 0; i < numberOfChannels; i++) {
+				channelBuffers[i] = inputBuffer.getChannelData(i)
+			}
+
+			// Pass data to the worker
+			const message = { channelBuffers, length, duration }
+			this._postMessageToWorker('pushInputData', message)
+
+			// Calculate time
+			elapsedTime += duration
+			if (elapsedTime >= timeslice) {
+				this._postMessageToWorker('getEncodedData')
+				elapsedTime = 0
+			}
+		}
+	}
+
+	/**
+	 * Begins recording media; this method can optionally be passed a timeslice
+	 * argument with a value in milliseconds.
+	 * @param {number} timeslice - If this is specified, the media will be captured
+	 *        in separate chunks of that duration, rather than the default behavior
+	 *        of recording the media in a single large chunk. In other words, an
+	 *        undefined value of timeslice will be understood as the largest long value.
+	 */
+	start(timeslice = Number.MAX_SAFE_INTEGER) {
+		if (this.state !== 'inactive') {
+			throw new Error('DOMException: INVALID_STATE_ERR, state must be inactive.')
+		}
+		if (timeslice < 0) {
+			throw new TypeError('invalid arguments, timeslice should be 0 or higher.')
+		}
+		timeslice /= 1000 // Convert milliseconds to seconds
+
+		// Check worker is closed (usually by stop()) and init.
+		if (this.workerState === 'closed') {
+			this._spawnWorker()
+		}
+
+		// Get channel count and sampling rate
+		// channelCount: https://www.w3.org/TR/mediacapture-streams/#media-track-settings
+		// sampleRate: https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/sampleRate
+		this.context = new AudioContext()
+		let tracks = this.stream.getAudioTracks()
+		if (!tracks[0]) {
+			throw new Error('DOMException: UnkownError, media track not found.')
+		}
+		this.channelCount = tracks[0].getSettings().channelCount || 1
+		this.sampleRate = this.context.sampleRate
+
+		/** @type {MediaStreamAudioSourceNode} */
+		this.source = this.context.createMediaStreamSource(this.stream)
+		/** @type {ScriptProcessorNode} */
+		this.processor = this.context.createScriptProcessor(
+			BUFFER_SIZE,
+			this.channelCount,
+			this.channelCount
+		)
+
+		// Start recording
+		this._state = 'recording'
+		this._enableAudioProcessCallback(timeslice)
+
+		// If the worker is already loaded then start
+		if (this.workerState === 'readyToInit') {
+			const { sampleRate, channelCount } = this
+			this._postMessageToWorker('init', {
+				sampleRate,
+				channelCount,
+				bitsPerSecond: this.audioBitsPerSecond,
+			})
+		}
+	}
+
+	/**
+	 * Stops recording, at which point a dataavailable event containing
+	 * the final Blob of saved data is fired. No more recording occurs.
+	 */
+	stop() {
+		if (this.state === 'inactive') {
+			throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.')
+		}
+
+		// Stop stream first
+		this.source.disconnect()
+		this.processor.disconnect()
+		this.context.close()
+
+		// Stop event will be triggered at _onmessageFromWorker(),
+		this._postMessageToWorker('done')
+
+		this._state = 'inactive'
+	}
+
+	/**
+	 * Pauses the recording of media.
+	 */
+	pause() {
+		if (this.state === 'inactive') {
+			throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.')
+		}
+
+		// Stop stream first
+		this.source.disconnect()
+		this.processor.disconnect()
+
+		let event = new window.Event('pause')
+		this.dispatchEvent(event)
+		this._state = 'paused'
+	}
+
+	/**
+	 * Resumes recording of media after having been paused.
+	 */
+	resume() {
+		if (this.state === 'inactive') {
+			throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.')
+		}
+
+		// Restart streaming data
+		this.source.connect(this.processor)
+		this.processor.connect(this.context.destination)
+
+		let event = new window.Event('resume')
+		this.dispatchEvent(event)
+		this._state = 'recording'
+	}
+
+	/**
+	 * Requests a Blob containing the saved data received thus far (or since
+	 * the last time requestData() was called. After calling this method,
+	 * recording continues, but in a new Blob.
+	 */
+	requestData() {
+		if (this.state === 'inactive') {
+			throw new Error('DOMException: INVALID_STATE_ERR, state must NOT be inactive.')
+		}
+
+		// dataavailable event will be triggerd at _onmessageFromWorker()
+		this._postMessageToWorker('getEncodedData')
+	}
+
+	/**
+	 * Returns a Boolean value indicating if the given MIME type is supported
+	 * by the current user agent .
+	 * @param {string} typeType - A MIME Type, including parameters when needed,
+	 *          specifying a container and/or codec formats for recording.
+	 * @return {boolean}
+	 */
+	static isTypeSupported(mimeType) {
+		// See: https://w3c.github.io/mediacapture-record/#dom-mediarecorder-istypesupported
+
+		// 1. If empty string, return true.
+		if (typeof mimeType === 'string' && !mimeType) {
+			return true
+		}
+		try {
+			var { type, subtype, codec } = OpusMediaRecorder._parseType(mimeType)
+		} catch (error) {
+			// 2. If not a valid string, return false.
+			return false
+		}
+		if (
+			type !== 'audio' ||
+			!(subtype === 'ogg' || subtype === 'webm' || subtype === 'wave' || subtype === 'wav')
+		) {
+			// 3,4. If type and subtype are unsupported the return false.
+			return false
+		}
+		// 5. If codec is unsupported then return false.
+		// 6. If the specified combination of all is not supported than return false.
+		switch (subtype) {
+			case 'ogg':
+				if (codec !== 'opus' && codec) {
+					return false
+				}
+				break
+			case 'webm':
+				if (codec !== 'opus' && codec) {
+					return false
+				}
+				break
+			case 'wave':
+			case 'wav':
+				if (codec) {
+					return false // Currently only supports signed 16 bits
+				}
+				break
+		}
+		// 7. return true.
+		return true
+	}
+
+	/**
+	 * Parse MIME. A helper function for isTypeSupported() and etc.
+	 * @param {string} mimeType - typeType - A MIME Type, including parameters when needed,
+	 *          specifying a container and/or codec formats for recording.
+	 * @return {?object} - An object with type, subtype, codec attributes
+	 *          if parsed correctly. null is returned if parsing failed.
+	 *          If mimeType is an empty string then return an object with attributes
+	 *          are empty strings
+	 */
+	static _parseType(mimeType) {
+		try {
+			const regex = /^(\w+)\/(\w+)(;\s*codecs=(\w+))?$/
+			var [, type, subtype, , codec] = mimeType.match(regex)
+		} catch (error) {
+			if (typeof mimeType === 'string' && !mimeType) {
+				return { type: '', subtype: '', codec: '' }
+			}
+			return null
+		}
+		return { type, subtype, codec }
+	}
 }
 
 // EventHandler attributes.
 // This code is a non-standard EventTarget but required by event-target-shim.
-[
-  'start', // Called to handle the {@link MediaRecorder#start} event.
-  'stop', // Called to handle the stop event.
-  'dataavailable', /* Called to handle the dataavailable event. The Blob of
+;[
+	'start', // Called to handle the {@link MediaRecorder#start} event.
+	'stop', // Called to handle the stop event.
+	'dataavailable' /* Called to handle the dataavailable event. The Blob of
                         recorded data is contained in this event and can be
-                        accessed via its data attribute. */
-  'pause', // Called to handle the pause event.
-  'resume', // Called to handle the resume event.
-  'error' // Called to handle a MediaRecorderErrorEvent.
-].forEach(name => defineEventAttribute(OpusMediaRecorder.prototype, name));
+                        accessed via its data attribute. */,
+	'pause', // Called to handle the pause event.
+	'resume', // Called to handle the resume event.
+	'error', // Called to handle a MediaRecorderErrorEvent.
+].forEach(name => defineEventAttribute(OpusMediaRecorder.prototype, name))
 
 // MS Edge specific monkey patching:
 // onaudioprocess callback cannot be triggered more than twice when postMessage
 // uses the seconde transfer argument. So disable the transfer argument only in Edge.
 if (browser && browser.name === 'edge') {
-  (function () {
-    var original = Worker.prototype.postMessage;
-    Worker.prototype.postMessage = function (message, transfer = null) {
-      original.apply(this, [message]);
-    };
-  })();
+	;(function () {
+		var original = Worker.prototype.postMessage
+		Worker.prototype.postMessage = function (message, transfer = null) {
+			original.apply(this, [message])
+		}
+	})()
 }
 
-module.exports = OpusMediaRecorder;
+module.exports = OpusMediaRecorder
diff --git a/node_modules/opus-media-recorder/WebMOpusEncoder.js b/node_modules/opus-media-recorder/WebMOpusEncoder.js
index 80d3fdc..650ffe4 100644
--- a/node_modules/opus-media-recorder/WebMOpusEncoder.js
+++ b/node_modules/opus-media-recorder/WebMOpusEncoder.js
@@ -6,7 +6,7 @@ var Module = (function() {
 function(Module) {
   Module = Module || {};
 
-var Module=typeof Module!=="undefined"?Module:{};const{EmscriptenMemoryAllocator:EmscriptenMemoryAllocator}=require("./commonFunctions.js");const OPUS_APPLICATION=2049;const OPUS_OUTPUT_SAMPLE_RATE=48e3;const OPUS_OUTPUT_MAX_LENGTH=4e3;const OPUS_FRAME_SIZE=20;const SPEEX_RESAMPLE_QUALITY=6;const BUFFER_LENGTH=4096;const OPUS_OK=0;const OPUS_SET_BITRATE_REQUEST=4002;const RESAMPLER_ERR_SUCCESS=0;class _OpusEncoder{constructor(inputSampleRate,channelCount,bitsPerSecond=undefined){this.config={inputSampleRate:inputSampleRate,channelCount:channelCount};this.memory=new EmscriptenMemoryAllocator(Module);this._opus_encoder_create=Module._opus_encoder_create;this._opus_encoder_ctl=Module._opus_encoder_ctl;this._opus_encode_float=Module._opus_encode_float;this._opus_encoder_destroy=Module._opus_encoder_destroy;this._speex_resampler_init=Module._speex_resampler_init;this._speex_resampler_process_interleaved_float=Module._speex_resampler_process_interleaved_float;this._speex_resampler_destroy=Module._speex_resampler_destroy;this._container=new Module.Container;this._container.init(OPUS_OUTPUT_SAMPLE_RATE,channelCount,Math.floor(Math.random()*4294967295));this.OpusInitCodec(OPUS_OUTPUT_SAMPLE_RATE,channelCount,bitsPerSecond);this.SpeexInitResampler(inputSampleRate,OPUS_OUTPUT_SAMPLE_RATE,channelCount);this.inputSamplesPerChannel=inputSampleRate*OPUS_FRAME_SIZE/1e3;this.outputSamplePerChannel=OPUS_OUTPUT_SAMPLE_RATE*OPUS_FRAME_SIZE/1e3;this.inputBufferIndex=0;this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*channelCount);this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*channelCount);this.mOutputBuffer=this.memory.mallocUint8Buffer(OPUS_OUTPUT_MAX_LENGTH);this.interleavedBuffers=channelCount!==1?new Float32Array(BUFFER_LENGTH*channelCount):undefined}encode(buffers){let samples=this.interleave(buffers);let sampleIndex=0;while(sampleIndex<samples.length){let lengthToCopy=Math.min(this.mInputBuffer.length-this.inputBufferIndex,samples.length-sampleIndex);this.mInputBuffer.set(samples.subarray(sampleIndex,sampleIndex+lengthToCopy),this.inputBufferIndex);this.inputBufferIndex+=lengthToCopy;if(this.inputBufferIndex>=this.mInputBuffer.length){let mInputLength=this.memory.mallocUint32(this.inputSamplesPerChannel);let mOutputLength=this.memory.mallocUint32(this.outputSamplePerChannel);let err=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,mInputLength.pointer,this.mResampledBuffer.pointer,mOutputLength.pointer);mInputLength.free();mOutputLength.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Resampling error.")}let packetLength=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(packetLength<0){throw new Error("Opus encoding error.")}this._container.writeFrame(this.mOutputBuffer.pointer,packetLength,this.outputSamplePerChannel);this.inputBufferIndex=0}sampleIndex+=lengthToCopy}}close(){const{channelCount:channelCount}=this.config;let finalFrameBuffers=[];for(let i=0;i<channelCount;++i){finalFrameBuffers.push(new Float32Array(BUFFER_LENGTH-this.inputBufferIndex/channelCount))}this.encode(finalFrameBuffers);Module.destroy(this._container);this.mInputBuffer.free();this.mResampledBuffer.free();this.mOutputBuffer.free();this._opus_encoder_destroy(this.encoder);this._speex_resampler_destroy(this.resampler)}interleave(channelBuffers){const chCount=channelBuffers.length;if(chCount===1){return channelBuffers[0]}for(let ch=0;ch<chCount;ch++){let buffer=channelBuffers[ch];for(let i=0;i<buffer.length;i++){this.interleavedBuffers[i*chCount+ch]=buffer[i]}}return this.interleavedBuffers}OpusInitCodec(outRate,chCount,bitRate=undefined){let mErr=this.memory.mallocUint32(undefined);this.encoder=this._opus_encoder_create(outRate,chCount,OPUS_APPLICATION,mErr.pointer);let err=mErr.value;mErr.free();if(err!==OPUS_OK){throw new Error("Opus encodor initialization failed.")}if(bitRate){this.OpusSetOpusControl(OPUS_SET_BITRATE_REQUEST,bitRate)}}OpusSetOpusControl(request,vaArg){let value=this.memory.mallocInt32(vaArg);this._opus_encoder_ctl(this.encoder,request,value.pointer);value.free()}SpeexInitResampler(inputRate,outputRate,chCount){let mErr=this.memory.mallocUint32(undefined);this.resampler=this._speex_resampler_init(chCount,inputRate,outputRate,SPEEX_RESAMPLE_QUALITY,mErr.pointer);let err=mErr.value;mErr.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Initializing resampler failed.")}}}Module.init=function(inputSampleRate,channelCount,bitsPerSecond){Module.encodedBuffers=[];Module.encoder=new _OpusEncoder(inputSampleRate,channelCount,bitsPerSecond)};Module.encode=function(buffers){Module.encoder.encode(buffers)};Module.flush=function(){return Module.encodedBuffers.splice(0,Module.encodedBuffers.length)};Module.close=function(){Module.encoder.close()};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){if(ENVIRONMENT_IS_WORKER){scriptDirectory=require("path").dirname(scriptDirectory)+"/"}else{scriptDirectory=__dirname+"/"}read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){return read(f)}}readBinary=function readBinary(f){var data;if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function shell_read(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime;if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];if(typeof WebAssembly!=="object"){err("no native wasm support detected")}var wasmMemory;var wasmTable=new WebAssembly.Table({"initial":60,"maximum":60+0,"element":"anyfunc"});var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;var WASM_PAGE_SIZE=65536;var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var DYNAMIC_BASE=5289024,DYNAMICTOP_PTR=45984;var INITIAL_INITIAL_MEMORY=Module["INITIAL_MEMORY"]||16777216;if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{wasmMemory=new WebAssembly.Memory({"initial":INITIAL_INITIAL_MEMORY/WASM_PAGE_SIZE,"maximum":INITIAL_INITIAL_MEMORY/WASM_PAGE_SIZE})}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_INITIAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";out(what);err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";throw new WebAssembly.RuntimeError(what)}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var wasmBinaryFile="WebMOpusEncoder.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(){try{if(wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(wasmBinaryFile)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary()})}return new Promise(function(resolve,reject){resolve(getBinary())})}function createWasm(){var info={"a":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module["asm"]=exports;removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiatedSource(output){receiveInstance(output["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&typeof fetch==="function"){fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync();return{}}function emscriptenPushBuffer(buf,len){let array=new Uint8Array(Module.HEAPU8.buffer,buf,len);Module.encodedBuffers.push(new Uint8Array(array).buffer)}__ATINIT__.push({func:function(){___wasm_call_ctors()}});function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};var SYSCALLS={mappings:{},buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:undefined,get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},get64:function(low,high){return low}};function ___syscall221(fd,cmd,varargs){SYSCALLS.varargs=varargs;return 0}function ___syscall5(path,flags,varargs){SYSCALLS.varargs=varargs}function ___syscall54(fd,op,varargs){SYSCALLS.varargs=varargs;return 0}function _abort(){abort()}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}function _fd_close(fd){return 0}function _fd_read(fd,iov,iovcnt,pnum){var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doReadv(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){}function _fd_write(fd,iov,iovcnt,pnum){var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(fd,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}function _time(ptr){var ret=Date.now()/1e3|0;if(ptr){HEAP32[ptr>>2]=ret}return ret}var asmLibraryArg={"a":___assert_fail,"e":___syscall221,"h":___syscall5,"g":___syscall54,"b":_abort,"m":emscriptenPushBuffer,"k":_emscripten_memcpy_big,"l":_emscripten_resize_heap,"c":_fd_close,"f":_fd_read,"j":_fd_seek,"d":_fd_write,"memory":wasmMemory,"table":wasmTable,"i":_time};var asm=createWasm();Module["asm"]=asm;var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return(___wasm_call_ctors=Module["___wasm_call_ctors"]=Module["asm"]["n"]).apply(null,arguments)};var ___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=function(){return(___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=Module["asm"]["o"]).apply(null,arguments)};var _emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=function(){return(_emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=Module["asm"]["p"]).apply(null,arguments)};var _emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=function(){return(_emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=Module["asm"]["q"]).apply(null,arguments)};var _emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=function(){return(_emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=Module["asm"]["r"]).apply(null,arguments)};var _emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=function(){return(_emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=Module["asm"]["s"]).apply(null,arguments)};var _emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=function(){return(_emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=Module["asm"]["t"]).apply(null,arguments)};var _opus_encoder_create=Module["_opus_encoder_create"]=function(){return(_opus_encoder_create=Module["_opus_encoder_create"]=Module["asm"]["u"]).apply(null,arguments)};var _opus_encode_float=Module["_opus_encode_float"]=function(){return(_opus_encode_float=Module["_opus_encode_float"]=Module["asm"]["v"]).apply(null,arguments)};var _opus_encoder_ctl=Module["_opus_encoder_ctl"]=function(){return(_opus_encoder_ctl=Module["_opus_encoder_ctl"]=Module["asm"]["w"]).apply(null,arguments)};var _opus_encoder_destroy=Module["_opus_encoder_destroy"]=function(){return(_opus_encoder_destroy=Module["_opus_encoder_destroy"]=Module["asm"]["x"]).apply(null,arguments)};var _speex_resampler_init=Module["_speex_resampler_init"]=function(){return(_speex_resampler_init=Module["_speex_resampler_init"]=Module["asm"]["y"]).apply(null,arguments)};var _speex_resampler_destroy=Module["_speex_resampler_destroy"]=function(){return(_speex_resampler_destroy=Module["_speex_resampler_destroy"]=Module["asm"]["z"]).apply(null,arguments)};var _speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=function(){return(_speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=Module["asm"]["A"]).apply(null,arguments)};var _free=Module["_free"]=function(){return(_free=Module["_free"]=Module["asm"]["B"]).apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return(_malloc=Module["_malloc"]=Module["asm"]["C"]).apply(null,arguments)};var dynCall_vi=Module["dynCall_vi"]=function(){return(dynCall_vi=Module["dynCall_vi"]=Module["asm"]["D"]).apply(null,arguments)};var dynCall_v=Module["dynCall_v"]=function(){return(dynCall_v=Module["dynCall_v"]=Module["asm"]["E"]).apply(null,arguments)};Module["asm"]=asm;var calledRun;Module["then"]=function(func){if(calledRun){func(Module)}else{var old=Module["onRuntimeInitialized"];Module["onRuntimeInitialized"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}noExitRuntime=true;run();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.__class__=WrapperObject;WrapperObject.__cache__={};Module["WrapperObject"]=WrapperObject;function getCache(__class__){return(__class__||WrapperObject).__cache__}Module["getCache"]=getCache;function wrapPointer(ptr,__class__){var cache=getCache(__class__);var ret=cache[ptr];if(ret)return ret;ret=Object.create((__class__||WrapperObject).prototype);ret.ptr=ptr;return cache[ptr]=ret}Module["wrapPointer"]=wrapPointer;function castObject(obj,__class__){return wrapPointer(obj.ptr,__class__)}Module["castObject"]=castObject;Module["NULL"]=wrapPointer(0);function destroy(obj){if(!obj["__destroy__"])throw"Error: Cannot destroy object. (Did you create it yourself?)";obj["__destroy__"]();delete getCache(obj.__class__)[obj.ptr]}Module["destroy"]=destroy;function compare(obj1,obj2){return obj1.ptr===obj2.ptr}Module["compare"]=compare;function getPointer(obj){return obj.ptr}Module["getPointer"]=getPointer;function getClass(obj){return obj.__class__}Module["getClass"]=getClass;var ensureCache={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ensureCache.needed){for(var i=0;i<ensureCache.temps.length;i++){Module["_free"](ensureCache.temps[i])}ensureCache.temps.length=0;Module["_free"](ensureCache.buffer);ensureCache.buffer=0;ensureCache.size+=ensureCache.needed;ensureCache.needed=0}if(!ensureCache.buffer){ensureCache.size+=128;ensureCache.buffer=Module["_malloc"](ensureCache.size);assert(ensureCache.buffer)}ensureCache.pos=0},alloc:function(array,view){assert(ensureCache.buffer);var bytes=view.BYTES_PER_ELEMENT;var len=array.length*bytes;len=len+7&-8;var ret;if(ensureCache.pos+len>=ensureCache.size){assert(len>0);ensureCache.needed+=len;ret=Module["_malloc"](len);ensureCache.temps.push(ret)}else{ret=ensureCache.buffer+ensureCache.pos;ensureCache.pos+=len}return ret},copy:function(array,view,offset){var offsetShifted=offset;var bytes=view.BYTES_PER_ELEMENT;switch(bytes){case 2:offsetShifted>>=1;break;case 4:offsetShifted>>=2;break;case 8:offsetShifted>>=3;break}for(var i=0;i<array.length;i++){view[offsetShifted+i]=array[i]}}};function VoidPtr(){throw"cannot construct a VoidPtr, no constructor in IDL"}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.__class__=VoidPtr;VoidPtr.__cache__={};Module["VoidPtr"]=VoidPtr;VoidPtr.prototype["__destroy__"]=VoidPtr.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_VoidPtr___destroy___0(self)};function Container(){this.ptr=_emscripten_bind_Container_Container_0();getCache(Container)[this.ptr]=this}Container.prototype=Object.create(WrapperObject.prototype);Container.prototype.constructor=Container;Container.prototype.__class__=Container;Container.__cache__={};Module["Container"]=Container;Container.prototype["init"]=Container.prototype.init=function(sample_rate,channel_count,serial){var self=this.ptr;if(sample_rate&&typeof sample_rate==="object")sample_rate=sample_rate.ptr;if(channel_count&&typeof channel_count==="object")channel_count=channel_count.ptr;if(serial&&typeof serial==="object")serial=serial.ptr;_emscripten_bind_Container_init_3(self,sample_rate,channel_count,serial)};Container.prototype["writeFrame"]=Container.prototype.writeFrame=function(data,size,num_samples){var self=this.ptr;if(data&&typeof data==="object")data=data.ptr;if(size&&typeof size==="object")size=size.ptr;if(num_samples&&typeof num_samples==="object")num_samples=num_samples.ptr;_emscripten_bind_Container_writeFrame_3(self,data,size,num_samples)};Container.prototype["__destroy__"]=Container.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Container___destroy___0(self)};
+var Module=typeof Module!=="undefined"?Module:{};const{EmscriptenMemoryAllocator:EmscriptenMemoryAllocator}=require("./commonFunctions.js");const OPUS_APPLICATION=2049;const OPUS_OUTPUT_SAMPLE_RATE=48e3;const OPUS_OUTPUT_MAX_LENGTH=4e3;const OPUS_FRAME_SIZE=20;const SPEEX_RESAMPLE_QUALITY=6;const BUFFER_LENGTH=4096;const OPUS_OK=0;const OPUS_SET_BITRATE_REQUEST=4002;const RESAMPLER_ERR_SUCCESS=0;class _OpusEncoder{constructor(inputSampleRate,channelCount,bitsPerSecond=undefined){this.config={inputSampleRate:inputSampleRate,channelCount:channelCount};this.memory=new EmscriptenMemoryAllocator(Module);this._opus_encoder_create=Module._opus_encoder_create;this._opus_encoder_ctl=Module._opus_encoder_ctl;this._opus_encode_float=Module._opus_encode_float;this._opus_encoder_destroy=Module._opus_encoder_destroy;this._speex_resampler_init=Module._speex_resampler_init;this._speex_resampler_process_interleaved_float=Module._speex_resampler_process_interleaved_float;this._speex_resampler_destroy=Module._speex_resampler_destroy;this._container=new Module.Container;this._container.init(OPUS_OUTPUT_SAMPLE_RATE,channelCount,Math.floor(Math.random()*4294967295));this.OpusInitCodec(OPUS_OUTPUT_SAMPLE_RATE,channelCount,bitsPerSecond);this.SpeexInitResampler(inputSampleRate,OPUS_OUTPUT_SAMPLE_RATE,channelCount);this.inputSamplesPerChannel=inputSampleRate*OPUS_FRAME_SIZE/1e3;this.outputSamplePerChannel=OPUS_OUTPUT_SAMPLE_RATE*OPUS_FRAME_SIZE/1e3;this.inputBufferIndex=0;this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*channelCount);this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*channelCount);this.mOutputBuffer=this.memory.mallocUint8Buffer(OPUS_OUTPUT_MAX_LENGTH);this.interleavedBuffers=channelCount!==1?new Float32Array(BUFFER_LENGTH*channelCount):undefined}encode(buffers){let samples=this.interleave(buffers);let sampleIndex=0;while(sampleIndex<samples.length){let lengthToCopy=Math.min(this.mInputBuffer.length-this.inputBufferIndex,samples.length-sampleIndex);this.mInputBuffer.set(samples.subarray(sampleIndex,sampleIndex+lengthToCopy),this.inputBufferIndex);this.inputBufferIndex+=lengthToCopy;if(this.inputBufferIndex>=this.mInputBuffer.length){let mInputLength=this.memory.mallocUint32(this.inputSamplesPerChannel);let mOutputLength=this.memory.mallocUint32(this.outputSamplePerChannel);let err=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,mInputLength.pointer,this.mResampledBuffer.pointer,mOutputLength.pointer);mInputLength.free();mOutputLength.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Resampling error.")}let packetLength=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(packetLength<0){throw new Error("Opus encoding error.")}this._container.writeFrame(this.mOutputBuffer.pointer,packetLength,this.outputSamplePerChannel);this.inputBufferIndex=0}sampleIndex+=lengthToCopy}}close(){const{channelCount:channelCount}=this.config;let finalFrameBuffers=[];for(let i=0;i<channelCount;++i){finalFrameBuffers.push(new Float32Array(BUFFER_LENGTH-this.inputBufferIndex/channelCount))}this.encode(finalFrameBuffers);Module.destroy(this._container);this.mInputBuffer.free();this.mResampledBuffer.free();this.mOutputBuffer.free();this._opus_encoder_destroy(this.encoder);this._speex_resampler_destroy(this.resampler)}interleave(channelBuffers){const chCount=channelBuffers.length;if(chCount===1){return channelBuffers[0]}for(let ch=0;ch<chCount;ch++){let buffer=channelBuffers[ch];for(let i=0;i<buffer.length;i++){this.interleavedBuffers[i*chCount+ch]=buffer[i]}}return this.interleavedBuffers}OpusInitCodec(outRate,chCount,bitRate=undefined){let mErr=this.memory.mallocUint32(undefined);this.encoder=this._opus_encoder_create(outRate,chCount,OPUS_APPLICATION,mErr.pointer);let err=mErr.value;mErr.free();if(err!==OPUS_OK){throw new Error("Opus encodor initialization failed.")}if(bitRate){this.OpusSetOpusControl(OPUS_SET_BITRATE_REQUEST,bitRate)}}OpusSetOpusControl(request,vaArg){let value=this.memory.mallocInt32(vaArg);this._opus_encoder_ctl(this.encoder,request,value.pointer);value.free()}SpeexInitResampler(inputRate,outputRate,chCount){let mErr=this.memory.mallocUint32(undefined);this.resampler=this._speex_resampler_init(chCount,inputRate,outputRate,SPEEX_RESAMPLE_QUALITY,mErr.pointer);let err=mErr.value;mErr.free();if(err!==RESAMPLER_ERR_SUCCESS){throw new Error("Initializing resampler failed.")}}}Module.init=function(inputSampleRate,channelCount,bitsPerSecond){Module.encodedBuffers=[];Module.encoder=new _OpusEncoder(inputSampleRate,channelCount,bitsPerSecond)};Module.encode=function(buffers){Module.encoder.encode(buffers)};Module.flush=function(){return Module.encodedBuffers.splice(0,Module.encodedBuffers.length)};Module.close=function(){Module.encoder.close()};var moduleOverrides={};var key;for(key in Module){if(Module.hasOwnProperty(key)){moduleOverrides[key]=Module[key]}}var arguments_=[];var thisProgram="./this.program";var quit_=function(status,toThrow){throw toThrow};var ENVIRONMENT_IS_WEB=false;var ENVIRONMENT_IS_WORKER=false;var ENVIRONMENT_IS_NODE=false;var ENVIRONMENT_HAS_NODE=false;var ENVIRONMENT_IS_SHELL=false;ENVIRONMENT_IS_WEB=typeof window==="object";ENVIRONMENT_IS_WORKER=typeof importScripts==="function";ENVIRONMENT_HAS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";ENVIRONMENT_IS_NODE=ENVIRONMENT_HAS_NODE&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER;ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;var scriptDirectory="";function locateFile(path){if(Module["locateFile"]){return Module["locateFile"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;var nodeFS;var nodePath;if(ENVIRONMENT_IS_NODE){scriptDirectory=__dirname+"/";read_=function shell_read(filename,binary){if(!nodeFS)nodeFS=require("fs");if(!nodePath)nodePath=require("path");filename=nodePath["normalize"](filename);return nodeFS["readFileSync"](filename,binary?null:"utf8")};readBinary=function readBinary(filename){var ret=read_(filename,true);if(!ret.buffer){ret=new Uint8Array(ret)}assert(ret.buffer);return ret};if(process["argv"].length>1){thisProgram=process["argv"][1].replace(/\\/g,"/")}arguments_=process["argv"].slice(2);process["on"]("uncaughtException",function(ex){if(!(ex instanceof ExitStatus)){throw ex}});process["on"]("unhandledRejection",abort);quit_=function(status){process["exit"](status)};Module["inspect"]=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL){if(typeof read!="undefined"){read_=function shell_read(f){return read(f)}}readBinary=function readBinary(f){var data;if(typeof readbuffer==="function"){return new Uint8Array(readbuffer(f))}data=read(f,"binary");assert(typeof data==="object");return data};if(typeof scriptArgs!="undefined"){arguments_=scriptArgs}else if(typeof arguments!="undefined"){arguments_=arguments}if(typeof quit==="function"){quit_=function(status){quit(status)}}if(typeof print!=="undefined"){if(typeof console==="undefined")console={};console.log=print;console.warn=console.error=typeof printErr!=="undefined"?printErr:print}}else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf("blob:")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1)}else{scriptDirectory=""}{read_=function shell_read(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=function readBinary(url){var xhr=new XMLHttpRequest;xhr.open("GET",url,false);xhr.responseType="arraybuffer";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=function readAsync(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function xhr_onload(){if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=function(title){document.title=title}}else{}var out=Module["print"]||console.log.bind(console);var err=Module["printErr"]||console.warn.bind(console);for(key in moduleOverrides){if(moduleOverrides.hasOwnProperty(key)){Module[key]=moduleOverrides[key]}}moduleOverrides=null;if(Module["arguments"])arguments_=Module["arguments"];if(Module["thisProgram"])thisProgram=Module["thisProgram"];if(Module["quit"])quit_=Module["quit"];var wasmBinary;if(Module["wasmBinary"])wasmBinary=Module["wasmBinary"];var noExitRuntime;if(Module["noExitRuntime"])noExitRuntime=Module["noExitRuntime"];if(typeof WebAssembly!=="object"){err("no native wasm support detected")}var wasmMemory;var wasmTable=new WebAssembly.Table({"initial":60,"maximum":60+0,"element":"anyfunc"});var ABORT=false;var EXITSTATUS=0;function assert(condition,text){if(!condition){abort("Assertion failed: "+text)}}var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}var UTF16Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):undefined;var WASM_PAGE_SIZE=65536;var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateGlobalBufferAndViews(buf){buffer=buf;Module["HEAP8"]=HEAP8=new Int8Array(buf);Module["HEAP16"]=HEAP16=new Int16Array(buf);Module["HEAP32"]=HEAP32=new Int32Array(buf);Module["HEAPU8"]=HEAPU8=new Uint8Array(buf);Module["HEAPU16"]=HEAPU16=new Uint16Array(buf);Module["HEAPU32"]=HEAPU32=new Uint32Array(buf);Module["HEAPF32"]=HEAPF32=new Float32Array(buf);Module["HEAPF64"]=HEAPF64=new Float64Array(buf)}var DYNAMIC_BASE=5288128,DYNAMICTOP_PTR=45088;var INITIAL_TOTAL_MEMORY=Module["TOTAL_MEMORY"]||16777216;if(Module["wasmMemory"]){wasmMemory=Module["wasmMemory"]}else{wasmMemory=new WebAssembly.Memory({"initial":INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE,"maximum":INITIAL_TOTAL_MEMORY/WASM_PAGE_SIZE})}if(wasmMemory){buffer=wasmMemory.buffer}INITIAL_TOTAL_MEMORY=buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR>>2]=DYNAMIC_BASE;function callRuntimeCallbacks(callbacks){while(callbacks.length>0){var callback=callbacks.shift();if(typeof callback=="function"){callback();continue}var func=callback.func;if(typeof func==="number"){if(callback.arg===undefined){Module["dynCall_v"](func)}else{Module["dynCall_vi"](func,callback.arg)}}else{func(callback.arg===undefined?null:callback.arg)}}}var __ATPRERUN__=[];var __ATINIT__=[];var __ATMAIN__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module["preRun"]){if(typeof Module["preRun"]=="function")Module["preRun"]=[Module["preRun"]];while(Module["preRun"].length){addOnPreRun(Module["preRun"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module["postRun"]){if(typeof Module["postRun"]=="function")Module["postRun"]=[Module["postRun"]];while(Module["postRun"].length){addOnPostRun(Module["postRun"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnPreMain(cb){__ATMAIN__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module["monitorRunDependencies"]){Module["monitorRunDependencies"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}Module["preloadedImages"]={};Module["preloadedAudios"]={};function abort(what){if(Module["onAbort"]){Module["onAbort"](what)}what+="";out(what);err(what);ABORT=true;EXITSTATUS=1;what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.";throw new WebAssembly.RuntimeError(what)}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return String.prototype.startsWith?filename.startsWith(dataURIPrefix):filename.indexOf(dataURIPrefix)===0}var wasmBinaryFile="WebMOpusEncoder.wasm";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinary(){try{if(wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(wasmBinaryFile)}else{throw"both async and sync fetching of the wasm failed"}}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch==="function"){return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){if(!response["ok"]){throw"failed to load wasm binary file at '"+wasmBinaryFile+"'"}return response["arrayBuffer"]()}).catch(function(){return getBinary()})}return new Promise(function(resolve,reject){resolve(getBinary())})}function createWasm(){var info={"env":asmLibraryArg,"wasi_snapshot_preview1":asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module["asm"]=exports;removeRunDependency("wasm-instantiate")}addRunDependency("wasm-instantiate");function receiveInstantiatedSource(output){receiveInstance(output["instance"])}function instantiateArrayBuffer(receiver){return getBinaryPromise().then(function(binary){return WebAssembly.instantiate(binary,info)}).then(receiver,function(reason){err("failed to asynchronously prepare wasm: "+reason);abort(reason)})}function instantiateAsync(){if(!wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!isDataURI(wasmBinaryFile)&&typeof fetch==="function"){fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(response){var result=WebAssembly.instantiateStreaming(response,info);return result.then(receiveInstantiatedSource,function(reason){err("wasm streaming compile failed: "+reason);err("falling back to ArrayBuffer instantiation");instantiateArrayBuffer(receiveInstantiatedSource)})})}else{return instantiateArrayBuffer(receiveInstantiatedSource)}}if(Module["instantiateWasm"]){try{var exports=Module["instantiateWasm"](info,receiveInstance);return exports}catch(e){err("Module.instantiateWasm callback failed with error: "+e);return false}}instantiateAsync();return{}}function emscriptenPushBuffer(buf,len){let array=new Uint8Array(Module.HEAPU8.buffer,buf,len);Module.encodedBuffers.push(new Uint8Array(array).buffer)}__ATINIT__.push({func:function(){___wasm_call_ctors()}});function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}function ___lock(){}var PATH={splitPath:function(filename){var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift("..")}}return parts},normalize:function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.substr(-1)==="/";path=PATH.normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:function(path){if(path==="/")return"/";var lastSlash=path.lastIndexOf("/");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};var SYSCALLS={buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=UTF8ToString(SYSCALLS.get());return ret},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();return low},getZero:function(){SYSCALLS.get()}};function ___syscall221(which,varargs){SYSCALLS.varargs=varargs;try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall5(which,varargs){SYSCALLS.varargs=varargs;try{var pathname=SYSCALLS.getStr(),flags=SYSCALLS.get(),mode=SYSCALLS.get();var stream=FS.open(pathname,flags,mode);return stream.fd}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall54(which,varargs){SYSCALLS.varargs=varargs;try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___unlock(){}function _abort(){abort()}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest)}function abortOnCannotGrowMemory(requestedSize){abort("OOM")}function _emscripten_resize_heap(requestedSize){abortOnCannotGrowMemory(requestedSize)}function _fd_close(fd){try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=SYSCALLS.doReadv(stream,iov,iovcnt);HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _fd_write(fd,iov,iovcnt,pnum){try{var num=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(fd,HEAPU8[ptr+j])}num+=len}HEAP32[pnum>>2]=num;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return e.errno}}function _time(ptr){var ret=Date.now()/1e3|0;if(ptr){HEAP32[ptr>>2]=ret}return ret}var asmLibraryArg={"a":___assert_fail,"f":___lock,"c":___syscall221,"i":___syscall5,"h":___syscall54,"b":___unlock,"e":_abort,"o":emscriptenPushBuffer,"l":_emscripten_memcpy_big,"m":_emscripten_resize_heap,"d":_fd_close,"n":_fd_read,"k":_fd_seek,"g":_fd_write,"memory":wasmMemory,"table":wasmTable,"j":_time};var asm=createWasm();Module["asm"]=asm;var ___wasm_call_ctors=Module["___wasm_call_ctors"]=function(){return Module["asm"]["p"].apply(null,arguments)};var ___em_js__emscriptenPushBuffer=Module["___em_js__emscriptenPushBuffer"]=function(){return Module["asm"]["q"].apply(null,arguments)};var _emscripten_bind_VoidPtr___destroy___0=Module["_emscripten_bind_VoidPtr___destroy___0"]=function(){return Module["asm"]["r"].apply(null,arguments)};var _emscripten_bind_Container_Container_0=Module["_emscripten_bind_Container_Container_0"]=function(){return Module["asm"]["s"].apply(null,arguments)};var _emscripten_bind_Container_init_3=Module["_emscripten_bind_Container_init_3"]=function(){return Module["asm"]["t"].apply(null,arguments)};var _emscripten_bind_Container_writeFrame_3=Module["_emscripten_bind_Container_writeFrame_3"]=function(){return Module["asm"]["u"].apply(null,arguments)};var _emscripten_bind_Container___destroy___0=Module["_emscripten_bind_Container___destroy___0"]=function(){return Module["asm"]["v"].apply(null,arguments)};var _opus_encoder_create=Module["_opus_encoder_create"]=function(){return Module["asm"]["w"].apply(null,arguments)};var _opus_encode_float=Module["_opus_encode_float"]=function(){return Module["asm"]["x"].apply(null,arguments)};var _opus_encoder_ctl=Module["_opus_encoder_ctl"]=function(){return Module["asm"]["y"].apply(null,arguments)};var _opus_encoder_destroy=Module["_opus_encoder_destroy"]=function(){return Module["asm"]["z"].apply(null,arguments)};var _speex_resampler_init=Module["_speex_resampler_init"]=function(){return Module["asm"]["A"].apply(null,arguments)};var _speex_resampler_destroy=Module["_speex_resampler_destroy"]=function(){return Module["asm"]["B"].apply(null,arguments)};var _speex_resampler_process_interleaved_float=Module["_speex_resampler_process_interleaved_float"]=function(){return Module["asm"]["C"].apply(null,arguments)};var _free=Module["_free"]=function(){return Module["asm"]["D"].apply(null,arguments)};var _malloc=Module["_malloc"]=function(){return Module["asm"]["E"].apply(null,arguments)};var dynCall_vi=Module["dynCall_vi"]=function(){return Module["asm"]["F"].apply(null,arguments)};var dynCall_v=Module["dynCall_v"]=function(){return Module["asm"]["G"].apply(null,arguments)};Module["asm"]=asm;var calledRun;Module["then"]=function(func){if(calledRun){func(Module)}else{var old=Module["onRuntimeInitialized"];Module["onRuntimeInitialized"]=function(){if(old)old();func(Module)}}return Module};function ExitStatus(status){this.name="ExitStatus";this.message="Program terminated with exit("+status+")";this.status=status}dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(args){args=args||arguments_;if(runDependencies>0){return}preRun();if(runDependencies>0)return;function doRun(){if(calledRun)return;calledRun=true;if(ABORT)return;initRuntime();preMain();if(Module["onRuntimeInitialized"])Module["onRuntimeInitialized"]();postRun()}if(Module["setStatus"]){Module["setStatus"]("Running...");setTimeout(function(){setTimeout(function(){Module["setStatus"]("")},1);doRun()},1)}else{doRun()}}Module["run"]=run;if(Module["preInit"]){if(typeof Module["preInit"]=="function")Module["preInit"]=[Module["preInit"]];while(Module["preInit"].length>0){Module["preInit"].pop()()}}noExitRuntime=true;run();function WrapperObject(){}WrapperObject.prototype=Object.create(WrapperObject.prototype);WrapperObject.prototype.constructor=WrapperObject;WrapperObject.prototype.__class__=WrapperObject;WrapperObject.__cache__={};Module["WrapperObject"]=WrapperObject;function getCache(__class__){return(__class__||WrapperObject).__cache__}Module["getCache"]=getCache;function wrapPointer(ptr,__class__){var cache=getCache(__class__);var ret=cache[ptr];if(ret)return ret;ret=Object.create((__class__||WrapperObject).prototype);ret.ptr=ptr;return cache[ptr]=ret}Module["wrapPointer"]=wrapPointer;function castObject(obj,__class__){return wrapPointer(obj.ptr,__class__)}Module["castObject"]=castObject;Module["NULL"]=wrapPointer(0);function destroy(obj){if(!obj["__destroy__"])throw"Error: Cannot destroy object. (Did you create it yourself?)";obj["__destroy__"]();delete getCache(obj.__class__)[obj.ptr]}Module["destroy"]=destroy;function compare(obj1,obj2){return obj1.ptr===obj2.ptr}Module["compare"]=compare;function getPointer(obj){return obj.ptr}Module["getPointer"]=getPointer;function getClass(obj){return obj.__class__}Module["getClass"]=getClass;var ensureCache={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ensureCache.needed){for(var i=0;i<ensureCache.temps.length;i++){Module["_free"](ensureCache.temps[i])}ensureCache.temps.length=0;Module["_free"](ensureCache.buffer);ensureCache.buffer=0;ensureCache.size+=ensureCache.needed;ensureCache.needed=0}if(!ensureCache.buffer){ensureCache.size+=128;ensureCache.buffer=Module["_malloc"](ensureCache.size);assert(ensureCache.buffer)}ensureCache.pos=0},alloc:function(array,view){assert(ensureCache.buffer);var bytes=view.BYTES_PER_ELEMENT;var len=array.length*bytes;len=len+7&-8;var ret;if(ensureCache.pos+len>=ensureCache.size){assert(len>0);ensureCache.needed+=len;ret=Module["_malloc"](len);ensureCache.temps.push(ret)}else{ret=ensureCache.buffer+ensureCache.pos;ensureCache.pos+=len}return ret},copy:function(array,view,offset){var offsetShifted=offset;var bytes=view.BYTES_PER_ELEMENT;switch(bytes){case 2:offsetShifted>>=1;break;case 4:offsetShifted>>=2;break;case 8:offsetShifted>>=3;break}for(var i=0;i<array.length;i++){view[offsetShifted+i]=array[i]}}};function VoidPtr(){throw"cannot construct a VoidPtr, no constructor in IDL"}VoidPtr.prototype=Object.create(WrapperObject.prototype);VoidPtr.prototype.constructor=VoidPtr;VoidPtr.prototype.__class__=VoidPtr;VoidPtr.__cache__={};Module["VoidPtr"]=VoidPtr;VoidPtr.prototype["__destroy__"]=VoidPtr.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_VoidPtr___destroy___0(self)};function Container(){this.ptr=_emscripten_bind_Container_Container_0();getCache(Container)[this.ptr]=this}Container.prototype=Object.create(WrapperObject.prototype);Container.prototype.constructor=Container;Container.prototype.__class__=Container;Container.__cache__={};Module["Container"]=Container;Container.prototype["init"]=Container.prototype.init=function(sample_rate,channel_count,serial){var self=this.ptr;if(sample_rate&&typeof sample_rate==="object")sample_rate=sample_rate.ptr;if(channel_count&&typeof channel_count==="object")channel_count=channel_count.ptr;if(serial&&typeof serial==="object")serial=serial.ptr;_emscripten_bind_Container_init_3(self,sample_rate,channel_count,serial)};Container.prototype["writeFrame"]=Container.prototype.writeFrame=function(data,size,num_samples){var self=this.ptr;if(data&&typeof data==="object")data=data.ptr;if(size&&typeof size==="object")size=size.ptr;if(num_samples&&typeof num_samples==="object")num_samples=num_samples.ptr;_emscripten_bind_Container_writeFrame_3(self,data,size,num_samples)};Container.prototype["__destroy__"]=Container.prototype.__destroy__=function(){var self=this.ptr;_emscripten_bind_Container___destroy___0(self)};(function(){function setupEnums(){}if(runtimeInitialized)setupEnums();else addOnPreMain(setupEnums)})();
 
 
   return Module
diff --git a/node_modules/opus-media-recorder/WebMOpusEncoder.wasm b/node_modules/opus-media-recorder/WebMOpusEncoder.wasm
index 58ab9dc..a90bd69 100644
Binary files a/node_modules/opus-media-recorder/WebMOpusEncoder.wasm and b/node_modules/opus-media-recorder/WebMOpusEncoder.wasm differ
diff --git a/node_modules/opus-media-recorder/encoderWorker.umd.js b/node_modules/opus-media-recorder/encoderWorker.umd.js
index 22bd990..0d69f16 100644
--- a/node_modules/opus-media-recorder/encoderWorker.umd.js
+++ b/node_modules/opus-media-recorder/encoderWorker.umd.js
@@ -14,4 +14,4 @@
 	else
 		root["encoderWorker"] = factory();
 })(typeof OpusMediaRecorder !== 'undefined' ? OpusMediaRecorder : typeof self !== 'undefined' ? self : this, function() {
-return function() {!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:e.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(t=u+"/"+t,o="/"===u.charAt(0))}return(o?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),u="/"===o(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&u&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),u=Math.min(o.length,i.length),a=u,s=0;s<u;s++)if(o[s]!==i[s]){a=s;break}var c=[];for(s=a;s<o.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,u=e.length-1;u>=0;--u){var a=e.charCodeAt(u);if(47!==a)-1===r&&(o=!1,r=u+1),46===a?-1===t?t=u:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=u+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(2))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l=function(){function e(t,n,r,o){switch(s(this,e),this._size=n,this._module=t,this._size){case 1:this._heapArray=r?this._module.HEAP8:this._module.HEAPU8;break;case 2:this._heapArray=r?this._module.HEAP16:this._module.HEAPU16;break;case 4:this._heapArray=r?this._module.HEAP32:this._module.HEAPU32;break;default:this._heapArray=this._module.HEAPU8}o&&(this._size=4,this._heapArray=this._module.HEAPF32),this._pointer=this._module._malloc(n)}return f(e,[{key:"free",value:function(){this._module._free(this.pointer)}},{key:"pointer",get:function(){return this._pointer}},{key:"value",get:function(){var e=0;switch(this._size){case 2:e=1;break;case 4:e=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}return this._heapArray[this.pointer>>e]},set:function(e){var t=0;switch(this._size){case 2:t=1;break;case 4:t=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}this._heapArray[this.pointer>>t]=e}}]),e}(),p=function(e){r(n,e);var t=i(n);function n(e,r){var o;return s(this,n),o=t.call(this,e,4,!0,!1),void 0!==r&&(o.value=r),o}return n}(l),_=function(e){r(n,e);var t=i(n);function n(e,r){var o;return s(this,n),o=t.call(this,e,4,!1,!1),void 0!==r&&(o.value=r),o}return n}(l),d=function(e){r(n,e);var t=i(n);function n(e,r,o,i,u){var a;s(this,n),a=t.call(this,e,r*o,i,u);var c=0;switch(o){case 1:a._heapArray=i?a._module.HEAP8:a._module.HEAPU8,c=0;break;case 2:a._heapArray=i?a._module.HEAP16:a._module.HEAPU16,c=1;break;case 4:a._heapArray=i?a._module.HEAP32:a._module.HEAPU32,c=2;break;default:throw new Error("Unit size must be an integer-size")}u&&(a._heapArray=a._module.HEAPF32,c=2);var f=a._pointer>>c;return a._buffer=a._heapArray.subarray(f,f+r),a._length=r,a}return f(n,[{key:"set",value:function(e,t){this._buffer.set(e,t)}},{key:"subarray",value:function(e,t){return this._buffer.subarray(e,t)}},{key:"length",get:function(){return this._length}}]),n}(l),h=function(e){r(n,e);var t=i(n);function n(e,r){return s(this,n),t.call(this,e,r,4,!0,!0)}return n}(d),m=function(e){r(n,e);var t=i(n);function n(e,r){return s(this,n),t.call(this,e,r,1,!1,!1)}return n}(d),y=function(){function e(t){s(this,e),this._module=t}return f(e,[{key:"mallocInt32",value:function(e){return new p(this._module,e)}},{key:"mallocUint32",value:function(e){return new _(this._module,e)}},{key:"mallocUint8Buffer",value:function(e){return new m(this._module,e)}},{key:"mallocFloat32Buffer",value:function(e){return new h(this._module,e)}}]),e}();e.exports={writeString:function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},EmscriptenMemoryAllocator:y}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&_())}function _(){if(!f){var e=a(p);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||f||a(_)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){},function(e,t,n){function r(e){var t,r=n(6),o=n(7),i=n(8);e.onmessage=function(e){var n=e.data.command;switch(n){case"loadEncoder":var u,a=e.data,s=a.mimeType,c=a.wasmPath;switch(s){case"audio/wav":case"audio/wave":u=r;break;case"audio/webm":u=o;break;case"audio/ogg":u=i}var f={};c&&(f.locateFile=function(e,t){return e.match(/.wasm/)?c:t+e}),u(f).then((function(e){t=e,self.postMessage({command:"readyToInit"})}));break;case"init":var l=e.data,p=l.sampleRate,_=l.channelCount,d=l.bitsPerSecond;t.init(p,_,d);break;case"pushInputData":for(var h=e.data,m=h.channelBuffers,y=(h.length,h.duration,0);y<m.length;y++)m[y]=new Float32Array(m[y].buffer);t.encode(m);break;case"getEncodedData":case"done":"done"===n&&t.close();var v=t.flush();self.postMessage({command:"done"===n?"lastEncodedData":"encodedData",buffers:v},v),"done"===n&&self.close()}}}"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&r(self),e.exports=r},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=n(1).writeString,a=Int16Array.BYTES_PER_ELEMENT,s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={inputSampleRate:t,channelCount:n},this.encodedBuffers=[]}var t,n,r;return t=e,(n=[{key:"encode",value:function(e){for(var t=e[0].length,n=new ArrayBuffer(t*a*this.config.channelCount),r=new DataView(n),o=0;o<this.config.channelCount;o++)for(var i=e[o],u=0;u<t;u++){var s=32767*i[u]|0;s>32767?s=32767:s<-32768&&(s=-32768);var c=(u*this.config.channelCount+o)*a;r.setInt16(c,0|s,!0)}this.encodedBuffers.push(n)}},{key:"getHeader",value:function(){var e=this.encodedBuffers.reduce((function(e,t){return e+t.byteLength}),0),t=new ArrayBuffer(44),n=new DataView(t);return u(n,0,"RIFF"),n.setUint32(4,36+e,!0),u(n,8,"WAVE"),u(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,this.config.channelCount,!0),n.setUint32(24,this.config.inputSampleRate,!0),n.setUint32(28,this.config.inputSampleRate*a*this.config.channelCount,!0),n.setUint16(32,a*this.config.channelCount,!0),n.setUint16(34,8*a,!0),u(n,36,"data"),n.setUint32(40,e,!0),t}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=function(e){return new Promise((function(t,n){(e=void 0!==e&&e||{}).init=function(t,n,r){e.encoder=new s(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){var t=e.encoder.getHeader(),n=e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length);return[t].concat(r(n))},e.close=function(){},t(e)}))}},function(e,t,n){(function(e,r,o,i){var u;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l,p=(l=(l="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){e=void 0!==(e=e||{})?e:{};var t=n(1),i=t.EmscriptenMemoryAllocator,u=2049,c=48e3,p=4e3,_=20,d=6,h=4096,m=0,y=4002,v=0,b=function(){function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s(this,t),this.config={inputSampleRate:n,channelCount:r},this.memory=new i(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._container=new e.Container,this._container.init(c,r,Math.floor(4294967295*Math.random())),this.OpusInitCodec(c,r,o),this.SpeexInitResampler(n,c,r),this.inputSamplesPerChannel=n*_/1e3,this.outputSamplePerChannel=c*_/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*r),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*r),this.mOutputBuffer=this.memory.mallocUint8Buffer(p),this.interleavedBuffers=1!==r?new Float32Array(h*r):void 0}return f(t,[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),u=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),u!==v)throw new Error("Resampling error.");var a=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(a<0)throw new Error("Opus encoding error.");this._container.writeFrame(this.mOutputBuffer.pointer,a,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"close",value:function(){for(var t=this.config.channelCount,n=[],r=0;r<t;++r)n.push(new Float32Array(h-this.inputBufferIndex/t));this.encode(n),e.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,u,r.pointer);var o=r.value;if(r.free(),o!==m)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(y,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,d,r.pointer);var o=r.value;if(r.free(),o!==v)throw new Error("Initializing resampler failed.")}}]),t}();e.init=function(t,n,r){e.encodedBuffers=[],e.encoder=new b(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){return e.encodedBuffers.splice(0,e.encodedBuffers.length)},e.close=function(){e.encoder.close()};var g,w={};for(g in e)e.hasOwnProperty(g)&&(w[g]=e[g]);var A=[],C=!1,S=!1,x=!1,P=!1;C="object"===("undefined"==typeof window?"undefined":a(window)),S="function"==typeof importScripts,x="object"===(void 0===r?"undefined":a(r))&&"object"===a(r.versions)&&"string"==typeof r.versions.node,P=!C&&!x&&!S;var E,B,I,R,O="";function j(t){return e.locateFile?e.locateFile(t,O):O+t}x?(O=S?n(0).dirname(O)+"/":o+"/",E=function(e,t){return I||(I=n(4)),R||(R=n(0)),e=R.normalize(e),I.readFileSync(e,t?null:"utf8")},B=function(e){var t=E(e,!0);return t.buffer||(t=new Uint8Array(t)),W(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),A=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof qe))throw e})),r.on("unhandledRejection",_e),e.inspect=function(){return"[Emscripten Module object]"}):P?("undefined"!=typeof read&&(E=function(e){return read(e)}),B=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(W("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?A=scriptArgs:void 0!==arguments&&(A=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(C||S)&&(S?O=self.location.href:document.currentScript&&(O=document.currentScript.src),l&&(O=l),O=0!==O.indexOf("blob:")?O.substr(0,O.lastIndexOf("/")+1):"",E=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},S&&(B=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var k,U,T=e.print||console.log.bind(console),F=e.printErr||console.warn.bind(console);for(g in w)w.hasOwnProperty(g)&&(e[g]=w[g]);w=null,e.arguments&&(A=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(k=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&F("no native wasm support detected");var H=new WebAssembly.Table({initial:60,maximum:60,element:"anyfunc"}),M=!1;function W(e,t){e||_e("Assertion failed: "+t)}var D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&D)return D.decode(e.subarray(t,o));for(var i="";t<o;){var u=e[t++];if(128&u){var a=63&e[t++];if(192!=(224&u)){var s=63&e[t++];if((u=224==(240&u)?(15&u)<<12|a<<6|s:(7&u)<<18|a<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(u);else{var c=u-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&u)<<6|a)}else i+=String.fromCharCode(u)}return i}function L(e,t){return e?z(q,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var V,q,N,G=65536;function X(t){V=t,e.HEAP8=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=N=new Int32Array(t),e.HEAPU8=q=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var Y=5289024,$=45984,J=e.INITIAL_MEMORY||16777216;function K(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(U=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:J/G,maximum:J/G}))&&(V=U.buffer),J=V.byteLength,X(V),N[$>>2]=Y;var Q=[],Z=[],ee=[],te=[];function ne(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)ue(e.preRun.shift());K(Q)}function re(){K(Z)}function oe(){K(ee)}function ie(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)ae(e.postRun.shift());K(te)}function ue(e){Q.unshift(e)}function ae(e){te.unshift(e)}var se=0,ce=null,fe=null;function le(t){se++,e.monitorRunDependencies&&e.monitorRunDependencies(se)}function pe(t){if(se--,e.monitorRunDependencies&&e.monitorRunDependencies(se),0==se&&(null!==ce&&(clearInterval(ce),ce=null),fe)){var n=fe;fe=null,n()}}function _e(t){throw e.onAbort&&e.onAbort(t),T(t+=""),F(t),M=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e.preloadedImages={},e.preloadedAudios={};var de="data:application/octet-stream;base64,";function he(e){return String.prototype.startsWith?e.startsWith(de):0===e.indexOf(de)}var me="WebMOpusEncoder.wasm";function ye(){try{if(k)return new Uint8Array(k);if(B)return B(me);throw"both async and sync fetching of the wasm failed"}catch(e){_e(e)}}function ve(){return k||!C&&!S||"function"!=typeof fetch?new Promise((function(e,t){e(ye())})):fetch(me,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+me+"'";return e.arrayBuffer()})).catch((function(){return ye()}))}function be(){var t={a:Te};function n(t,n){var r=t.exports;e.asm=r,pe()}function r(e){n(e.instance)}function o(e){return ve().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){F("failed to asynchronously prepare wasm: "+e),_e(e)}))}if(le(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return F("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(k||"function"!=typeof WebAssembly.instantiateStreaming||he(me)||"function"!=typeof fetch)return o(r);fetch(me,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){F("wasm streaming compile failed: "+e),F("falling back to ArrayBuffer instantiation"),o(r)}))}))}(),{}}function ge(t,n){var r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encodedBuffers.push(new Uint8Array(r).buffer)}function we(e,t,n,r){_e("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",n,r?L(r):"unknown function"])}he(me)||(me=j(me)),Z.push({func:function(){Me()}});var Ae={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Ae.buffers[e];0===t||10===t?((1===e?T:F)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Ae.varargs+=4,N[Ae.varargs-4>>2]},getStr:function(e){return L(e)},get64:function(e,t){return e}};function Ce(e,t,n){return Ae.varargs=n,0}function Se(e,t,n){Ae.varargs=n}function xe(e,t,n){return Ae.varargs=n,0}function Pe(){_e()}function Ee(e,t,n){q.copyWithin(e,t,t+n)}function Be(e){_e("OOM")}function Ie(e){Be()}function Re(e){return 0}function Oe(e,t,n,r){var o=Ae.getStreamFromFD(e),i=Ae.doReadv(o,t,n);return N[r>>2]=i,0}function je(e,t,n,r,o){}function ke(e,t,n,r){for(var o=0,i=0;i<n;i++){for(var u=N[t+8*i>>2],a=N[t+(8*i+4)>>2],s=0;s<a;s++)Ae.printChar(e,q[u+s]);o+=a}return N[r>>2]=o,0}function Ue(e){var t=Date.now()/1e3|0;return e&&(N[e>>2]=t),t}var Te={a:we,e:Ce,h:Se,g:xe,b:Pe,m:ge,k:Ee,l:Ie,c:Re,f:Oe,j:je,d:ke,memory:U,table:H,i:Ue},Fe=be();e.asm=Fe;var He,Me=e.___wasm_call_ctors=function(){return(Me=e.___wasm_call_ctors=e.asm.n).apply(null,arguments)},We=(e.___em_js__emscriptenPushBuffer=function(){return(e.___em_js__emscriptenPushBuffer=e.asm.o).apply(null,arguments)},e._emscripten_bind_VoidPtr___destroy___0=function(){return(We=e._emscripten_bind_VoidPtr___destroy___0=e.asm.p).apply(null,arguments)}),De=e._emscripten_bind_Container_Container_0=function(){return(De=e._emscripten_bind_Container_Container_0=e.asm.q).apply(null,arguments)},ze=e._emscripten_bind_Container_init_3=function(){return(ze=e._emscripten_bind_Container_init_3=e.asm.r).apply(null,arguments)},Le=e._emscripten_bind_Container_writeFrame_3=function(){return(Le=e._emscripten_bind_Container_writeFrame_3=e.asm.s).apply(null,arguments)},Ve=e._emscripten_bind_Container___destroy___0=function(){return(Ve=e._emscripten_bind_Container___destroy___0=e.asm.t).apply(null,arguments)};function qe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ne(t){function n(){He||(He=!0,e.calledRun=!0,M||(re(),oe(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ie()))}t=t||A,se>0||(ne(),se>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e._opus_encoder_create=function(){return(e._opus_encoder_create=e.asm.u).apply(null,arguments)},e._opus_encode_float=function(){return(e._opus_encode_float=e.asm.v).apply(null,arguments)},e._opus_encoder_ctl=function(){return(e._opus_encoder_ctl=e.asm.w).apply(null,arguments)},e._opus_encoder_destroy=function(){return(e._opus_encoder_destroy=e.asm.x).apply(null,arguments)},e._speex_resampler_init=function(){return(e._speex_resampler_init=e.asm.y).apply(null,arguments)},e._speex_resampler_destroy=function(){return(e._speex_resampler_destroy=e.asm.z).apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return(e._speex_resampler_process_interleaved_float=e.asm.A).apply(null,arguments)},e._free=function(){return(e._free=e.asm.B).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.C).apply(null,arguments)},e.dynCall_vi=function(){return(e.dynCall_vi=e.asm.D).apply(null,arguments)},e.dynCall_v=function(){return(e.dynCall_v=e.asm.E).apply(null,arguments)},e.asm=Fe,e.then=function(t){if(He)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},fe=function e(){He||Ne(),He||(fe=e)},e.run=Ne,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function Ge(){}function Xe(e){return(e||Ge).__cache__}function Ye(e,t){var n=Xe(t),r=n[e];return r||((r=Object.create((t||Ge).prototype)).ptr=e,n[e]=r)}function $e(e,t){return Ye(e.ptr,t)}function Je(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Xe(e.__class__)[e.ptr]}function Ke(e,t){return e.ptr===t.ptr}function Qe(e){return e.ptr}function Ze(e){return e.__class__}function et(){throw"cannot construct a VoidPtr, no constructor in IDL"}function tt(){this.ptr=De(),Xe(tt)[this.ptr]=this}return Ne(),Ge.prototype=Object.create(Ge.prototype),Ge.prototype.constructor=Ge,Ge.prototype.__class__=Ge,Ge.__cache__={},e.WrapperObject=Ge,e.getCache=Xe,e.wrapPointer=Ye,e.castObject=$e,e.NULL=Ye(0),e.destroy=Je,e.compare=Ke,e.getPointer=Qe,e.getClass=Ze,et.prototype=Object.create(Ge.prototype),et.prototype.constructor=et,et.prototype.__class__=et,et.__cache__={},e.VoidPtr=et,et.prototype.__destroy__=et.prototype.__destroy__=function(){var e=this.ptr;We(e)},tt.prototype=Object.create(Ge.prototype),tt.prototype.constructor=tt,tt.prototype.__class__=tt,tt.__cache__={},e.Container=tt,tt.prototype.init=tt.prototype.init=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),ze(r,e,t,n)},tt.prototype.writeFrame=tt.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),Le(r,e,t,n)},tt.prototype.__destroy__=tt.prototype.__destroy__=function(){var e=this.ptr;Ve(e)},e});"object"===a(t)&&"object"===a(i)?i.exports=p:void 0===(u=function(){return p}.apply(t,[]))||(i.exports=u)}).call(this,"/index.js",n(2),"/",n(3)(e))},function(e,t,n){(function(e,r,o,i){var u;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l,p=(l=(l="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){e=void 0!==(e=e||{})?e:{};var t=n(1),i=t.EmscriptenMemoryAllocator,u=2049,c=48e3,p=4e3,_=20,d=6,h=4096,m=0,y=4002,v=0,b=function(){function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s(this,t),this.config={inputSampleRate:n,channelCount:r},this.memory=new i(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._container=new e.Container,this._container.init(c,r,Math.floor(4294967295*Math.random())),this.OpusInitCodec(c,r,o),this.SpeexInitResampler(n,c,r),this.inputSamplesPerChannel=n*_/1e3,this.outputSamplePerChannel=c*_/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*r),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*r),this.mOutputBuffer=this.memory.mallocUint8Buffer(p),this.interleavedBuffers=1!==r?new Float32Array(h*r):void 0}return f(t,[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),u=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),u!==v)throw new Error("Resampling error.");var a=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(a<0)throw new Error("Opus encoding error.");this._container.writeFrame(this.mOutputBuffer.pointer,a,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"close",value:function(){for(var t=this.config.channelCount,n=[],r=0;r<t;++r)n.push(new Float32Array(h-this.inputBufferIndex/t));this.encode(n),e.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,u,r.pointer);var o=r.value;if(r.free(),o!==m)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(y,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,d,r.pointer);var o=r.value;if(r.free(),o!==v)throw new Error("Initializing resampler failed.")}}]),t}();e.init=function(t,n,r){e.encodedBuffers=[],e.encoder=new b(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){return e.encodedBuffers.splice(0,e.encodedBuffers.length)},e.close=function(){e.encoder.close()};var g,w={};for(g in e)e.hasOwnProperty(g)&&(w[g]=e[g]);var A=[],C=!1,S=!1,x=!1,P=!1;C="object"===("undefined"==typeof window?"undefined":a(window)),S="function"==typeof importScripts,x="object"===(void 0===r?"undefined":a(r))&&"object"===a(r.versions)&&"string"==typeof r.versions.node,P=!C&&!x&&!S;var E,B,I,R,O="";function j(t){return e.locateFile?e.locateFile(t,O):O+t}x?(O=S?n(0).dirname(O)+"/":o+"/",E=function(e,t){return I||(I=n(4)),R||(R=n(0)),e=R.normalize(e),I.readFileSync(e,t?null:"utf8")},B=function(e){var t=E(e,!0);return t.buffer||(t=new Uint8Array(t)),W(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),A=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof We))throw e})),r.on("unhandledRejection",_e),e.inspect=function(){return"[Emscripten Module object]"}):P?("undefined"!=typeof read&&(E=function(e){return read(e)}),B=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(W("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?A=scriptArgs:void 0!==arguments&&(A=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(C||S)&&(S?O=self.location.href:document.currentScript&&(O=document.currentScript.src),l&&(O=l),O=0!==O.indexOf("blob:")?O.substr(0,O.lastIndexOf("/")+1):"",E=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},S&&(B=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var k,U,T=e.print||console.log.bind(console),F=e.printErr||console.warn.bind(console);for(g in w)w.hasOwnProperty(g)&&(e[g]=w[g]);w=null,e.arguments&&(A=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(k=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&F("no native wasm support detected");var H=new WebAssembly.Table({initial:36,maximum:36,element:"anyfunc"}),M=!1;function W(e,t){e||_e("Assertion failed: "+t)}var D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&D)return D.decode(e.subarray(t,o));for(var i="";t<o;){var u=e[t++];if(128&u){var a=63&e[t++];if(192!=(224&u)){var s=63&e[t++];if((u=224==(240&u)?(15&u)<<12|a<<6|s:(7&u)<<18|a<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(u);else{var c=u-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&u)<<6|a)}else i+=String.fromCharCode(u)}return i}function L(e,t){return e?z(q,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var V,q,N,G=65536;function X(t){V=t,e.HEAP8=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=N=new Int32Array(t),e.HEAPU8=q=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var Y=5289728,$=46688,J=e.INITIAL_MEMORY||16777216;function K(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(U=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:J/G,maximum:J/G}))&&(V=U.buffer),J=V.byteLength,X(V),N[$>>2]=Y;var Q=[],Z=[],ee=[],te=[];function ne(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)ue(e.preRun.shift());K(Q)}function re(){K(Z)}function oe(){K(ee)}function ie(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)ae(e.postRun.shift());K(te)}function ue(e){Q.unshift(e)}function ae(e){te.unshift(e)}var se=0,ce=null,fe=null;function le(t){se++,e.monitorRunDependencies&&e.monitorRunDependencies(se)}function pe(t){if(se--,e.monitorRunDependencies&&e.monitorRunDependencies(se),0==se&&(null!==ce&&(clearInterval(ce),ce=null),fe)){var n=fe;fe=null,n()}}function _e(t){throw e.onAbort&&e.onAbort(t),T(t+=""),F(t),M=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e.preloadedImages={},e.preloadedAudios={};var de="data:application/octet-stream;base64,";function he(e){return String.prototype.startsWith?e.startsWith(de):0===e.indexOf(de)}var me="OggOpusEncoder.wasm";function ye(){try{if(k)return new Uint8Array(k);if(B)return B(me);throw"both async and sync fetching of the wasm failed"}catch(e){_e(e)}}function ve(){return k||!C&&!S||"function"!=typeof fetch?new Promise((function(e,t){e(ye())})):fetch(me,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+me+"'";return e.arrayBuffer()})).catch((function(){return ye()}))}function be(){var t={a:Re};function n(t,n){var r=t.exports;e.asm=r,pe()}function r(e){n(e.instance)}function o(e){return ve().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){F("failed to asynchronously prepare wasm: "+e),_e(e)}))}if(le(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return F("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(k||"function"!=typeof WebAssembly.instantiateStreaming||he(me)||"function"!=typeof fetch)return o(r);fetch(me,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){F("wasm streaming compile failed: "+e),F("falling back to ArrayBuffer instantiation"),o(r)}))}))}(),{}}function ge(t,n){var r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encodedBuffers.push(new Uint8Array(r).buffer)}function we(e,t,n,r){_e("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",n,r?L(r):"unknown function"])}function Ae(){_e()}function Ce(e,t,n){q.copyWithin(e,t,t+n)}function Se(e){_e("OOM")}function xe(e){Se()}he(me)||(me=j(me)),Z.push({func:function(){ke()}});var Pe={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Pe.buffers[e];0===t||10===t?((1===e?T:F)(z(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Pe.varargs+=4,N[Pe.varargs-4>>2]},getStr:function(e){return L(e)},get64:function(e,t){return e}};function Ee(e){return 0}function Be(e,t,n,r,o){}function Ie(e,t,n,r){for(var o=0,i=0;i<n;i++){for(var u=N[t+8*i>>2],a=N[t+(8*i+4)>>2],s=0;s<a;s++)Pe.printChar(e,q[u+s]);o+=a}return N[r>>2]=o,0}var Re={a:we,c:Ae,d:ge,f:Ce,g:xe,h:Ee,e:Be,b:Ie,memory:U,table:H},Oe=be();e.asm=Oe;var je,ke=e.___wasm_call_ctors=function(){return(ke=e.___wasm_call_ctors=e.asm.i).apply(null,arguments)},Ue=(e.___em_js__emscriptenPushBuffer=function(){return(e.___em_js__emscriptenPushBuffer=e.asm.j).apply(null,arguments)},e._emscripten_bind_VoidPtr___destroy___0=function(){return(Ue=e._emscripten_bind_VoidPtr___destroy___0=e.asm.k).apply(null,arguments)}),Te=e._emscripten_bind_Container_Container_0=function(){return(Te=e._emscripten_bind_Container_Container_0=e.asm.l).apply(null,arguments)},Fe=e._emscripten_bind_Container_init_3=function(){return(Fe=e._emscripten_bind_Container_init_3=e.asm.m).apply(null,arguments)},He=e._emscripten_bind_Container_writeFrame_3=function(){return(He=e._emscripten_bind_Container_writeFrame_3=e.asm.n).apply(null,arguments)},Me=e._emscripten_bind_Container___destroy___0=function(){return(Me=e._emscripten_bind_Container___destroy___0=e.asm.o).apply(null,arguments)};function We(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function De(t){function n(){je||(je=!0,e.calledRun=!0,M||(re(),oe(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ie()))}t=t||A,se>0||(ne(),se>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e._opus_encoder_create=function(){return(e._opus_encoder_create=e.asm.p).apply(null,arguments)},e._opus_encode_float=function(){return(e._opus_encode_float=e.asm.q).apply(null,arguments)},e._opus_encoder_ctl=function(){return(e._opus_encoder_ctl=e.asm.r).apply(null,arguments)},e._opus_encoder_destroy=function(){return(e._opus_encoder_destroy=e.asm.s).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.t).apply(null,arguments)},e._free=function(){return(e._free=e.asm.u).apply(null,arguments)},e._speex_resampler_init=function(){return(e._speex_resampler_init=e.asm.v).apply(null,arguments)},e._speex_resampler_destroy=function(){return(e._speex_resampler_destroy=e.asm.w).apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return(e._speex_resampler_process_interleaved_float=e.asm.x).apply(null,arguments)},e.dynCall_vi=function(){return(e.dynCall_vi=e.asm.y).apply(null,arguments)},e.dynCall_v=function(){return(e.dynCall_v=e.asm.z).apply(null,arguments)},e.asm=Oe,e.then=function(t){if(je)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},fe=function e(){je||De(),je||(fe=e)},e.run=De,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function ze(){}function Le(e){return(e||ze).__cache__}function Ve(e,t){var n=Le(t),r=n[e];return r||((r=Object.create((t||ze).prototype)).ptr=e,n[e]=r)}function qe(e,t){return Ve(e.ptr,t)}function Ne(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Le(e.__class__)[e.ptr]}function Ge(e,t){return e.ptr===t.ptr}function Xe(e){return e.ptr}function Ye(e){return e.__class__}function $e(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Je(){this.ptr=Te(),Le(Je)[this.ptr]=this}return De(),ze.prototype=Object.create(ze.prototype),ze.prototype.constructor=ze,ze.prototype.__class__=ze,ze.__cache__={},e.WrapperObject=ze,e.getCache=Le,e.wrapPointer=Ve,e.castObject=qe,e.NULL=Ve(0),e.destroy=Ne,e.compare=Ge,e.getPointer=Xe,e.getClass=Ye,$e.prototype=Object.create(ze.prototype),$e.prototype.constructor=$e,$e.prototype.__class__=$e,$e.__cache__={},e.VoidPtr=$e,$e.prototype.__destroy__=$e.prototype.__destroy__=function(){var e=this.ptr;Ue(e)},Je.prototype=Object.create(ze.prototype),Je.prototype.constructor=Je,Je.prototype.__class__=Je,Je.__cache__={},e.Container=Je,Je.prototype.init=Je.prototype.init=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),Fe(r,e,t,n)},Je.prototype.writeFrame=Je.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),He(r,e,t,n)},Je.prototype.__destroy__=Je.prototype.__destroy__=function(){var e=this.ptr;Me(e)},e});"object"===a(t)&&"object"===a(i)?i.exports=p:void 0===(u=function(){return p}.apply(t,[]))||(i.exports=u)}).call(this,"/index.js",n(2),"/",n(3)(e))}]);}});
\ No newline at end of file
+return function() {!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l=function(){function e(t,n,r,o){switch(s(this,e),this._size=n,this._module=t,this._size){case 1:this._heapArray=r?this._module.HEAP8:this._module.HEAPU8;break;case 2:this._heapArray=r?this._module.HEAP16:this._module.HEAPU16;break;case 4:this._heapArray=r?this._module.HEAP32:this._module.HEAPU32;break;default:this._heapArray=this._module.HEAPU8}o&&(this._size=4,this._heapArray=this._module.HEAPF32),this._pointer=this._module._malloc(n)}return f(e,[{key:"free",value:function(){this._module._free(this.pointer)}},{key:"pointer",get:function(){return this._pointer}},{key:"value",get:function(){var e=0;switch(this._size){case 2:e=1;break;case 4:e=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}return this._heapArray[this.pointer>>e]},set:function(e){var t=0;switch(this._size){case 2:t=1;break;case 4:t=2;break;default:throw new Error("Pointer can be only deferenced as integer-sized")}this._heapArray[this.pointer>>t]=e}}]),e}(),p=function(e){r(n,e);var t=i(n);function n(e,r){var o;return s(this,n),o=t.call(this,e,4,!0,!1),void 0!==r&&(o.value=r),o}return n}(l),d=function(e){r(n,e);var t=i(n);function n(e,r){var o;return s(this,n),o=t.call(this,e,4,!1,!1),void 0!==r&&(o.value=r),o}return n}(l),h=function(e){r(n,e);var t=i(n);function n(e,r,o,i,u){var a;s(this,n),a=t.call(this,e,r*o,i,u);var c=0;switch(o){case 1:a._heapArray=i?a._module.HEAP8:a._module.HEAPU8,c=0;break;case 2:a._heapArray=i?a._module.HEAP16:a._module.HEAPU16,c=1;break;case 4:a._heapArray=i?a._module.HEAP32:a._module.HEAPU32,c=2;break;default:throw new Error("Unit size must be an integer-size")}u&&(a._heapArray=a._module.HEAPF32,c=2);var f=a._pointer>>c;return a._buffer=a._heapArray.subarray(f,f+r),a._length=r,a}return f(n,[{key:"set",value:function(e,t){this._buffer.set(e,t)}},{key:"subarray",value:function(e,t){return this._buffer.subarray(e,t)}},{key:"length",get:function(){return this._length}}]),n}(l),m=function(e){r(n,e);var t=i(n);function n(e,r){return s(this,n),t.call(this,e,r,4,!0,!0)}return n}(h),y=function(e){r(n,e);var t=i(n);function n(e,r){return s(this,n),t.call(this,e,r,1,!1,!1)}return n}(h),_=function(){function e(t){s(this,e),this._module=t}return f(e,[{key:"mallocInt32",value:function(e){return new p(this._module,e)}},{key:"mallocUint32",value:function(e){return new d(this._module,e)}},{key:"mallocUint8Buffer",value:function(e){return new y(this._module,e)}},{key:"mallocFloat32Buffer",value:function(e){return new m(this._module,e)}}]),e}();e.exports={writeString:function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},EmscriptenMemoryAllocator:_}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var e=a(p);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var u=i>=0?arguments[i]:e.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(t=u+"/"+t,o="/"===u.charAt(0))}return(o?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),u="/"===o(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&u&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),u=Math.min(o.length,i.length),a=u,s=0;s<u;s++)if(o[s]!==i[s]){a=s;break}var c=[];for(s=a;s<o.length;s++)c.push("..");return(c=c.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){r=i;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){n=t+1;break}}else-1===r&&(o=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,o=!0,i=0,u=e.length-1;u>=0;--u){var a=e.charCodeAt(u);if(47!==a)-1===r&&(o=!1,r=u+1),46===a?-1===t?t=u:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){n=u+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(1))},function(e,t,n){function r(e){var t,r=n(6),o=n(7),i=n(8);e.onmessage=function(e){var n=e.data.command;switch(n){case"loadEncoder":var u,a=e.data,s=a.mimeType,c=a.wasmPath;switch(s){case"audio/wav":case"audio/wave":u=r;break;case"audio/webm":u=o;break;case"audio/ogg":u=i}var f={};c&&(f.locateFile=function(e,t){return e.match(/.wasm/)?c:t+e}),u(f).then((function(e){t=e,self.postMessage({command:"readyToInit"})}));break;case"init":var l=e.data,p=l.sampleRate,d=l.channelCount,h=l.bitsPerSecond;t.init(p,d,h);break;case"pushInputData":for(var m=e.data,y=m.channelBuffers,_=(m.length,m.duration,0);_<y.length;_++)y[_]=new Float32Array(y[_].buffer);t.encode(y);break;case"getEncodedData":case"done":"done"===n&&t.close();var v=t.flush();self.postMessage({command:"done"===n?"lastEncodedData":"encodedData",buffers:v},v),"done"===n&&self.close()}}}"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&r(self),e.exports=r},function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=n(0).writeString,a=Int16Array.BYTES_PER_ELEMENT,s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={inputSampleRate:t,channelCount:n},this.encodedBuffers=[]}var t,n,r;return t=e,(n=[{key:"encode",value:function(e){for(var t=e[0].length,n=new ArrayBuffer(t*a*this.config.channelCount),r=new DataView(n),o=0;o<this.config.channelCount;o++)for(var i=e[o],u=0;u<t;u++){var s=32767*i[u]|0;s>32767?s=32767:s<-32768&&(s=-32768);var c=(u*this.config.channelCount+o)*a;r.setInt16(c,0|s,!0)}this.encodedBuffers.push(n)}},{key:"getHeader",value:function(){var e=this.encodedBuffers.reduce((function(e,t){return e+t.byteLength}),0),t=new ArrayBuffer(44),n=new DataView(t);return u(n,0,"RIFF"),n.setUint32(4,36+e,!0),u(n,8,"WAVE"),u(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,this.config.channelCount,!0),n.setUint32(24,this.config.inputSampleRate,!0),n.setUint32(28,this.config.inputSampleRate*a*this.config.channelCount,!0),n.setUint16(32,a*this.config.channelCount,!0),n.setUint16(34,8*a,!0),u(n,36,"data"),n.setUint32(40,e,!0),t}}])&&i(t.prototype,n),r&&i(t,r),e}();e.exports=function(e){return new Promise((function(t,n){(e=void 0!==e&&e||{}).init=function(t,n,r){e.encoder=new s(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){var t=e.encoder.getHeader(),n=e.encoder.encodedBuffers.splice(0,e.encoder.encodedBuffers.length);return[t].concat(r(n))},e.close=function(){},t(e)}))}},function(e,t,n){(function(e,r,o,i){var u;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l,p=(l=(l="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){e=void 0!==(e=e||{})?e:{};var t=n(0),i=t.EmscriptenMemoryAllocator,u=2049,c=48e3,p=4e3,d=20,h=6,m=4096,y=0,_=4002,v=0,b=function(){function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s(this,t),this.config={inputSampleRate:n,channelCount:r},this.memory=new i(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._container=new e.Container,this._container.init(c,r,Math.floor(4294967295*Math.random())),this.OpusInitCodec(c,r,o),this.SpeexInitResampler(n,c,r),this.inputSamplesPerChannel=n*d/1e3,this.outputSamplePerChannel=c*d/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*r),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*r),this.mOutputBuffer=this.memory.mallocUint8Buffer(p),this.interleavedBuffers=1!==r?new Float32Array(m*r):void 0}return f(t,[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),u=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),u!==v)throw new Error("Resampling error.");var a=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(a<0)throw new Error("Opus encoding error.");this._container.writeFrame(this.mOutputBuffer.pointer,a,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"close",value:function(){for(var t=this.config.channelCount,n=[],r=0;r<t;++r)n.push(new Float32Array(m-this.inputBufferIndex/t));this.encode(n),e.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,u,r.pointer);var o=r.value;if(r.free(),o!==y)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(_,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,h,r.pointer);var o=r.value;if(r.free(),o!==v)throw new Error("Initializing resampler failed.")}}]),t}();e.init=function(t,n,r){e.encodedBuffers=[],e.encoder=new b(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){return e.encodedBuffers.splice(0,e.encodedBuffers.length)},e.close=function(){e.encoder.close()};var g,w={};for(g in e)e.hasOwnProperty(g)&&(w[g]=e[g]);var A=[],S=!1,E=!1,P=!1,x=!1;S="object"===("undefined"==typeof window?"undefined":a(window)),E="function"==typeof importScripts,P="object"===(void 0===r?"undefined":a(r))&&"object"===a(r.versions)&&"string"==typeof r.versions.node&&!S&&!E,x=!S&&!P&&!E;var C,B,O,R,I="";function j(t){return e.locateFile?e.locateFile(t,I):I+t}P?(I=o+"/",C=function(e,t){return O||(O=n(3)),R||(R=n(4)),e=R.normalize(e),O.readFileSync(e,t?null:"utf8")},B=function(e){var t=C(e,!0);return t.buffer||(t=new Uint8Array(t)),W(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),A=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof Ye))throw e})),r.on("unhandledRejection",me),e.inspect=function(){return"[Emscripten Module object]"}):x?("undefined"!=typeof read&&(C=function(e){return read(e)}),B=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(W("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?A=scriptArgs:void 0!==arguments&&(A=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(S||E)&&(E?I=self.location.href:document.currentScript&&(I=document.currentScript.src),l&&(I=l),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",C=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},E&&(B=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var k,F,T=e.print||console.log.bind(console),U=e.printErr||console.warn.bind(console);for(g in w)w.hasOwnProperty(g)&&(e[g]=w[g]);w=null,e.arguments&&(A=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(k=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&U("no native wasm support detected");var H=new WebAssembly.Table({initial:60,maximum:60,element:"anyfunc"}),M=!1;function W(e,t){e||me("Assertion failed: "+t)}var D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&D)return D.decode(e.subarray(t,o));for(var i="";t<o;){var u=e[t++];if(128&u){var a=63&e[t++];if(192!=(224&u)){var s=63&e[t++];if((u=224==(240&u)?(15&u)<<12|a<<6|s:(7&u)<<18|a<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(u);else{var c=u-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&u)<<6|a)}else i+=String.fromCharCode(u)}return i}function L(e,t){return e?z(V,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var q,V,G,N=65536;function X(t){q=t,e.HEAP8=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=G=new Int32Array(t),e.HEAPU8=V=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var Y=5288128,Z=45088,$=e.TOTAL_MEMORY||16777216;function J(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(F=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:$/N,maximum:$/N}))&&(q=F.buffer),$=q.byteLength,X(q),G[Z>>2]=Y;var K=[],Q=[],ee=[],te=[],ne=!1;function re(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)ae(e.preRun.shift());J(K)}function oe(){ne=!0,J(Q)}function ie(){J(ee)}function ue(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)ce(e.postRun.shift());J(te)}function ae(e){K.unshift(e)}function se(e){ee.unshift(e)}function ce(e){te.unshift(e)}var fe=0,le=null,pe=null;function de(t){fe++,e.monitorRunDependencies&&e.monitorRunDependencies(fe)}function he(t){if(fe--,e.monitorRunDependencies&&e.monitorRunDependencies(fe),0==fe&&(null!==le&&(clearInterval(le),le=null),pe)){var n=pe;pe=null,n()}}function me(t){throw e.onAbort&&e.onAbort(t),T(t+=""),U(t),M=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e.preloadedImages={},e.preloadedAudios={};var ye="data:application/octet-stream;base64,";function _e(e){return String.prototype.startsWith?e.startsWith(ye):0===e.indexOf(ye)}var ve="WebMOpusEncoder.wasm";function be(){try{if(k)return new Uint8Array(k);if(B)return B(ve);throw"both async and sync fetching of the wasm failed"}catch(e){me(e)}}function ge(){return k||!S&&!E||"function"!=typeof fetch?new Promise((function(e,t){e(be())})):fetch(ve,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ve+"'";return e.arrayBuffer()})).catch((function(){return be()}))}function we(){var t={env:We,wasi_snapshot_preview1:We};function n(t,n){var r=t.exports;e.asm=r,he()}function r(e){n(e.instance)}function o(e){return ge().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){U("failed to asynchronously prepare wasm: "+e),me(e)}))}if(de(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return U("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(k||"function"!=typeof WebAssembly.instantiateStreaming||_e(ve)||"function"!=typeof fetch)return o(r);fetch(ve,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){U("wasm streaming compile failed: "+e),U("falling back to ArrayBuffer instantiation"),o(r)}))}))}(),{}}function Ae(t,n){var r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encodedBuffers.push(new Uint8Array(r).buffer)}function Se(e,t,n,r){me("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",n,r?L(r):"unknown function"])}function Ee(){}_e(ve)||(ve=j(ve)),Q.push({func:function(){Le()}});var Pe={buffers:[null,[],[]],printChar:function(e,t){var n=Pe.buffers[e];0===t||10===t?((1===e?T:U)(z(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return Pe.varargs+=4,G[Pe.varargs-4>>2]},getStr:function(){return L(Pe.get())},get64:function(){var e=Pe.get();return Pe.get(),e},getZero:function(){Pe.get()}};function xe(e,t){Pe.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),-e.errno}}function Ce(e,t){Pe.varargs=t;try{var n=Pe.getStr(),r=Pe.get(),o=Pe.get();return FS.open(n,r,o).fd}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),-e.errno}}function Be(e,t){Pe.varargs=t;try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),-e.errno}}function Oe(){}function Re(){me()}function Ie(e,t,n){V.set(V.subarray(t,t+n),e)}function je(e){me("OOM")}function ke(e){je()}function Fe(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Te(e,t,n,r){try{var o=Pe.getStreamFromFD(e),i=Pe.doReadv(o,t,n);return G[r>>2]=i,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Ue(e,t,n,r,o){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function He(e,t,n,r){try{for(var o=0,i=0;i<n;i++){for(var u=G[t+8*i>>2],a=G[t+(8*i+4)>>2],s=0;s<a;s++)Pe.printChar(e,V[u+s]);o+=a}return G[r>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Me(e){var t=Date.now()/1e3|0;return e&&(G[e>>2]=t),t}var We={a:Se,f:Ee,c:xe,i:Ce,h:Be,b:Oe,e:Re,o:Ae,l:Ie,m:ke,d:Fe,n:Te,k:Ue,g:He,memory:F,table:H,j:Me},De=we();e.asm=De;var ze,Le=e.___wasm_call_ctors=function(){return e.asm.p.apply(null,arguments)},qe=(e.___em_js__emscriptenPushBuffer=function(){return e.asm.q.apply(null,arguments)},e._emscripten_bind_VoidPtr___destroy___0=function(){return e.asm.r.apply(null,arguments)}),Ve=e._emscripten_bind_Container_Container_0=function(){return e.asm.s.apply(null,arguments)},Ge=e._emscripten_bind_Container_init_3=function(){return e.asm.t.apply(null,arguments)},Ne=e._emscripten_bind_Container_writeFrame_3=function(){return e.asm.u.apply(null,arguments)},Xe=e._emscripten_bind_Container___destroy___0=function(){return e.asm.v.apply(null,arguments)};function Ye(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Ze(t){function n(){ze||(ze=!0,M||(oe(),ie(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ue()))}t=t||A,fe>0||(re(),fe>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e._opus_encoder_create=function(){return e.asm.w.apply(null,arguments)},e._opus_encode_float=function(){return e.asm.x.apply(null,arguments)},e._opus_encoder_ctl=function(){return e.asm.y.apply(null,arguments)},e._opus_encoder_destroy=function(){return e.asm.z.apply(null,arguments)},e._speex_resampler_init=function(){return e.asm.A.apply(null,arguments)},e._speex_resampler_destroy=function(){return e.asm.B.apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return e.asm.C.apply(null,arguments)},e._free=function(){return e.asm.D.apply(null,arguments)},e._malloc=function(){return e.asm.E.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.F.apply(null,arguments)},e.dynCall_v=function(){return e.asm.G.apply(null,arguments)},e.asm=De,e.then=function(t){if(ze)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},pe=function e(){ze||Ze(),ze||(pe=e)},e.run=Ze,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function $e(){}function Je(e){return(e||$e).__cache__}function Ke(e,t){var n=Je(t),r=n[e];return r||((r=Object.create((t||$e).prototype)).ptr=e,n[e]=r)}function Qe(e,t){return Ke(e.ptr,t)}function et(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Je(e.__class__)[e.ptr]}function tt(e,t){return e.ptr===t.ptr}function nt(e){return e.ptr}function rt(e){return e.__class__}function ot(){throw"cannot construct a VoidPtr, no constructor in IDL"}function it(){this.ptr=Ve(),Je(it)[this.ptr]=this}return Ze(),$e.prototype=Object.create($e.prototype),$e.prototype.constructor=$e,$e.prototype.__class__=$e,$e.__cache__={},e.WrapperObject=$e,e.getCache=Je,e.wrapPointer=Ke,e.castObject=Qe,e.NULL=Ke(0),e.destroy=et,e.compare=tt,e.getPointer=nt,e.getClass=rt,ot.prototype=Object.create($e.prototype),ot.prototype.constructor=ot,ot.prototype.__class__=ot,ot.__cache__={},e.VoidPtr=ot,ot.prototype.__destroy__=ot.prototype.__destroy__=function(){var e=this.ptr;qe(e)},it.prototype=Object.create($e.prototype),it.prototype.constructor=it,it.prototype.__class__=it,it.__cache__={},e.Container=it,it.prototype.init=it.prototype.init=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),Ge(r,e,t,n)},it.prototype.writeFrame=it.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),Ne(r,e,t,n)},it.prototype.__destroy__=it.prototype.__destroy__=function(){var e=this.ptr;Xe(e)},function(){function e(){}ne||se(e)}(),e});"object"===a(t)&&"object"===a(i)?i.exports=p:void 0===(u=function(){return p}.apply(t,[]))||(i.exports=u)}).call(this,"/index.js",n(1),"/",n(2)(e))},function(e,t,n){(function(e,r,o,i){var u;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var l,p=(l=(l="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){e=void 0!==(e=e||{})?e:{};var t=n(0),i=t.EmscriptenMemoryAllocator,u=2049,c=48e3,p=4e3,d=20,h=6,m=4096,y=0,_=4002,v=0,b=function(){function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s(this,t),this.config={inputSampleRate:n,channelCount:r},this.memory=new i(e),this._opus_encoder_create=e._opus_encoder_create,this._opus_encoder_ctl=e._opus_encoder_ctl,this._opus_encode_float=e._opus_encode_float,this._opus_encoder_destroy=e._opus_encoder_destroy,this._speex_resampler_init=e._speex_resampler_init,this._speex_resampler_process_interleaved_float=e._speex_resampler_process_interleaved_float,this._speex_resampler_destroy=e._speex_resampler_destroy,this._container=new e.Container,this._container.init(c,r,Math.floor(4294967295*Math.random())),this.OpusInitCodec(c,r,o),this.SpeexInitResampler(n,c,r),this.inputSamplesPerChannel=n*d/1e3,this.outputSamplePerChannel=c*d/1e3,this.inputBufferIndex=0,this.mInputBuffer=this.memory.mallocFloat32Buffer(this.inputSamplesPerChannel*r),this.mResampledBuffer=this.memory.mallocFloat32Buffer(this.outputSamplePerChannel*r),this.mOutputBuffer=this.memory.mallocUint8Buffer(p),this.interleavedBuffers=1!==r?new Float32Array(m*r):void 0}return f(t,[{key:"encode",value:function(e){for(var t=this.interleave(e),n=0;n<t.length;){var r=Math.min(this.mInputBuffer.length-this.inputBufferIndex,t.length-n);if(this.mInputBuffer.set(t.subarray(n,n+r),this.inputBufferIndex),this.inputBufferIndex+=r,this.inputBufferIndex>=this.mInputBuffer.length){var o=this.memory.mallocUint32(this.inputSamplesPerChannel),i=this.memory.mallocUint32(this.outputSamplePerChannel),u=this._speex_resampler_process_interleaved_float(this.resampler,this.mInputBuffer.pointer,o.pointer,this.mResampledBuffer.pointer,i.pointer);if(o.free(),i.free(),u!==v)throw new Error("Resampling error.");var a=this._opus_encode_float(this.encoder,this.mResampledBuffer.pointer,this.outputSamplePerChannel,this.mOutputBuffer.pointer,this.mOutputBuffer.length);if(a<0)throw new Error("Opus encoding error.");this._container.writeFrame(this.mOutputBuffer.pointer,a,this.outputSamplePerChannel),this.inputBufferIndex=0}n+=r}}},{key:"close",value:function(){for(var t=this.config.channelCount,n=[],r=0;r<t;++r)n.push(new Float32Array(m-this.inputBufferIndex/t));this.encode(n),e.destroy(this._container),this.mInputBuffer.free(),this.mResampledBuffer.free(),this.mOutputBuffer.free(),this._opus_encoder_destroy(this.encoder),this._speex_resampler_destroy(this.resampler)}},{key:"interleave",value:function(e){var t=e.length;if(1===t)return e[0];for(var n=0;n<t;n++)for(var r=e[n],o=0;o<r.length;o++)this.interleavedBuffers[o*t+n]=r[o];return this.interleavedBuffers}},{key:"OpusInitCodec",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.memory.mallocUint32(void 0);this.encoder=this._opus_encoder_create(e,t,u,r.pointer);var o=r.value;if(r.free(),o!==y)throw new Error("Opus encodor initialization failed.");n&&this.OpusSetOpusControl(_,n)}},{key:"OpusSetOpusControl",value:function(e,t){var n=this.memory.mallocInt32(t);this._opus_encoder_ctl(this.encoder,e,n.pointer),n.free()}},{key:"SpeexInitResampler",value:function(e,t,n){var r=this.memory.mallocUint32(void 0);this.resampler=this._speex_resampler_init(n,e,t,h,r.pointer);var o=r.value;if(r.free(),o!==v)throw new Error("Initializing resampler failed.")}}]),t}();e.init=function(t,n,r){e.encodedBuffers=[],e.encoder=new b(t,n,r)},e.encode=function(t){e.encoder.encode(t)},e.flush=function(){return e.encodedBuffers.splice(0,e.encodedBuffers.length)},e.close=function(){e.encoder.close()};var g,w={};for(g in e)e.hasOwnProperty(g)&&(w[g]=e[g]);var A=[],S=!1,E=!1,P=!1,x=!1;S="object"===("undefined"==typeof window?"undefined":a(window)),E="function"==typeof importScripts,P="object"===(void 0===r?"undefined":a(r))&&"object"===a(r.versions)&&"string"==typeof r.versions.node&&!S&&!E,x=!S&&!P&&!E;var C,B,O,R,I="";function j(t){return e.locateFile?e.locateFile(t,I):I+t}P?(I=o+"/",C=function(e,t){return O||(O=n(3)),R||(R=n(4)),e=R.normalize(e),O.readFileSync(e,t?null:"utf8")},B=function(e){var t=C(e,!0);return t.buffer||(t=new Uint8Array(t)),W(t.buffer),t},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),A=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof ze))throw e})),r.on("unhandledRejection",me),e.inspect=function(){return"[Emscripten Module object]"}):x?("undefined"!=typeof read&&(C=function(e){return read(e)}),B=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(W("object"===a(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?A=scriptArgs:void 0!==arguments&&(A=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(S||E)&&(E?I=self.location.href:document.currentScript&&(I=document.currentScript.src),l&&(I=l),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",C=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},E&&(B=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var k,F,T=e.print||console.log.bind(console),U=e.printErr||console.warn.bind(console);for(g in w)w.hasOwnProperty(g)&&(e[g]=w[g]);w=null,e.arguments&&(A=e.arguments),e.thisProgram&&e.thisProgram,e.quit&&e.quit,e.wasmBinary&&(k=e.wasmBinary),e.noExitRuntime&&e.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":a(WebAssembly))&&U("no native wasm support detected");var H=new WebAssembly.Table({initial:36,maximum:36,element:"anyfunc"}),M=!1;function W(e,t){e||me("Assertion failed: "+t)}var D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&D)return D.decode(e.subarray(t,o));for(var i="";t<o;){var u=e[t++];if(128&u){var a=63&e[t++];if(192!=(224&u)){var s=63&e[t++];if((u=224==(240&u)?(15&u)<<12|a<<6|s:(7&u)<<18|a<<12|s<<6|63&e[t++])<65536)i+=String.fromCharCode(u);else{var c=u-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&u)<<6|a)}else i+=String.fromCharCode(u)}return i}function L(e,t){return e?z(V,e,t):""}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var q,V,G,N=65536;function X(t){q=t,e.HEAP8=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=G=new Int32Array(t),e.HEAPU8=V=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var Y=5288848,Z=45808,$=e.TOTAL_MEMORY||16777216;function J(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?e.dynCall_v(r):e.dynCall_vi(r,n.arg):r(void 0===n.arg?null:n.arg)}else n()}}(F=e.wasmMemory?e.wasmMemory:new WebAssembly.Memory({initial:$/N,maximum:$/N}))&&(q=F.buffer),$=q.byteLength,X(q),G[Z>>2]=Y;var K=[],Q=[],ee=[],te=[],ne=!1;function re(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)ae(e.preRun.shift());J(K)}function oe(){ne=!0,J(Q)}function ie(){J(ee)}function ue(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)ce(e.postRun.shift());J(te)}function ae(e){K.unshift(e)}function se(e){ee.unshift(e)}function ce(e){te.unshift(e)}var fe=0,le=null,pe=null;function de(t){fe++,e.monitorRunDependencies&&e.monitorRunDependencies(fe)}function he(t){if(fe--,e.monitorRunDependencies&&e.monitorRunDependencies(fe),0==fe&&(null!==le&&(clearInterval(le),le=null),pe)){var n=pe;pe=null,n()}}function me(t){throw e.onAbort&&e.onAbort(t),T(t+=""),U(t),M=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}e.preloadedImages={},e.preloadedAudios={};var ye="data:application/octet-stream;base64,";function _e(e){return String.prototype.startsWith?e.startsWith(ye):0===e.indexOf(ye)}var ve="OggOpusEncoder.wasm";function be(){try{if(k)return new Uint8Array(k);if(B)return B(ve);throw"both async and sync fetching of the wasm failed"}catch(e){me(e)}}function ge(){return k||!S&&!E||"function"!=typeof fetch?new Promise((function(e,t){e(be())})):fetch(ve,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ve+"'";return e.arrayBuffer()})).catch((function(){return be()}))}function we(){var t={env:je,wasi_snapshot_preview1:je};function n(t,n){var r=t.exports;e.asm=r,he()}function r(e){n(e.instance)}function o(e){return ge().then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){U("failed to asynchronously prepare wasm: "+e),me(e)}))}if(de(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return U("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(k||"function"!=typeof WebAssembly.instantiateStreaming||_e(ve)||"function"!=typeof fetch)return o(r);fetch(ve,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){U("wasm streaming compile failed: "+e),U("falling back to ArrayBuffer instantiation"),o(r)}))}))}(),{}}function Ae(t,n){var r=new Uint8Array(e.HEAPU8.buffer,t,n);e.encodedBuffers.push(new Uint8Array(r).buffer)}function Se(e,t,n,r){me("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",n,r?L(r):"unknown function"])}function Ee(){me()}function Pe(e,t,n){V.set(V.subarray(t,t+n),e)}function xe(e){me("OOM")}function Ce(e){xe()}_e(ve)||(ve=j(ve)),Q.push({func:function(){Te()}});var Be={buffers:[null,[],[]],printChar:function(e,t){var n=Be.buffers[e];0===t||10===t?((1===e?T:U)(z(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return Be.varargs+=4,G[Be.varargs-4>>2]},getStr:function(){return L(Be.get())},get64:function(){var e=Be.get();return Be.get(),e},getZero:function(){Be.get()}};function Oe(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Re(e,t,n,r,o){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Ie(e,t,n,r){try{for(var o=0,i=0;i<n;i++){for(var u=G[t+8*i>>2],a=G[t+(8*i+4)>>2],s=0;s<a;s++)Be.printChar(e,V[u+s]);o+=a}return G[r>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}var je={a:Se,b:Ee,c:Ae,e:Pe,f:Ce,h:Oe,d:Re,g:Ie,memory:F,table:H},ke=we();e.asm=ke;var Fe,Te=e.___wasm_call_ctors=function(){return e.asm.i.apply(null,arguments)},Ue=(e.___em_js__emscriptenPushBuffer=function(){return e.asm.j.apply(null,arguments)},e._emscripten_bind_VoidPtr___destroy___0=function(){return e.asm.k.apply(null,arguments)}),He=e._emscripten_bind_Container_Container_0=function(){return e.asm.l.apply(null,arguments)},Me=e._emscripten_bind_Container_init_3=function(){return e.asm.m.apply(null,arguments)},We=e._emscripten_bind_Container_writeFrame_3=function(){return e.asm.n.apply(null,arguments)},De=e._emscripten_bind_Container___destroy___0=function(){return e.asm.o.apply(null,arguments)};function ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Le(t){function n(){Fe||(Fe=!0,M||(oe(),ie(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),ue()))}t=t||A,fe>0||(re(),fe>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),n()}),1)):n()))}if(e._opus_encoder_create=function(){return e.asm.p.apply(null,arguments)},e._opus_encode_float=function(){return e.asm.q.apply(null,arguments)},e._opus_encoder_ctl=function(){return e.asm.r.apply(null,arguments)},e._opus_encoder_destroy=function(){return e.asm.s.apply(null,arguments)},e._malloc=function(){return e.asm.t.apply(null,arguments)},e._free=function(){return e.asm.u.apply(null,arguments)},e._speex_resampler_init=function(){return e.asm.v.apply(null,arguments)},e._speex_resampler_destroy=function(){return e.asm.w.apply(null,arguments)},e._speex_resampler_process_interleaved_float=function(){return e.asm.x.apply(null,arguments)},e.dynCall_vi=function(){return e.asm.y.apply(null,arguments)},e.dynCall_v=function(){return e.asm.z.apply(null,arguments)},e.asm=ke,e.then=function(t){if(Fe)t(e);else{var n=e.onRuntimeInitialized;e.onRuntimeInitialized=function(){n&&n(),t(e)}}return e},pe=function e(){Fe||Le(),Fe||(pe=e)},e.run=Le,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();function qe(){}function Ve(e){return(e||qe).__cache__}function Ge(e,t){var n=Ve(t),r=n[e];return r||((r=Object.create((t||qe).prototype)).ptr=e,n[e]=r)}function Ne(e,t){return Ge(e.ptr,t)}function Xe(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Ve(e.__class__)[e.ptr]}function Ye(e,t){return e.ptr===t.ptr}function Ze(e){return e.ptr}function $e(e){return e.__class__}function Je(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Ke(){this.ptr=He(),Ve(Ke)[this.ptr]=this}return Le(),qe.prototype=Object.create(qe.prototype),qe.prototype.constructor=qe,qe.prototype.__class__=qe,qe.__cache__={},e.WrapperObject=qe,e.getCache=Ve,e.wrapPointer=Ge,e.castObject=Ne,e.NULL=Ge(0),e.destroy=Xe,e.compare=Ye,e.getPointer=Ze,e.getClass=$e,Je.prototype=Object.create(qe.prototype),Je.prototype.constructor=Je,Je.prototype.__class__=Je,Je.__cache__={},e.VoidPtr=Je,Je.prototype.__destroy__=Je.prototype.__destroy__=function(){var e=this.ptr;Ue(e)},Ke.prototype=Object.create(qe.prototype),Ke.prototype.constructor=Ke,Ke.prototype.__class__=Ke,Ke.__cache__={},e.Container=Ke,Ke.prototype.init=Ke.prototype.init=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),Me(r,e,t,n)},Ke.prototype.writeFrame=Ke.prototype.writeFrame=function(e,t,n){var r=this.ptr;e&&"object"===a(e)&&(e=e.ptr),t&&"object"===a(t)&&(t=t.ptr),n&&"object"===a(n)&&(n=n.ptr),We(r,e,t,n)},Ke.prototype.__destroy__=Ke.prototype.__destroy__=function(){var e=this.ptr;De(e)},function(){function e(){}ne||se(e)}(),e});"object"===a(t)&&"object"===a(i)?i.exports=p:void 0===(u=function(){return p}.apply(t,[]))||(i.exports=u)}).call(this,"/index.js",n(1),"/",n(2)(e))}]);}});
\ No newline at end of file
